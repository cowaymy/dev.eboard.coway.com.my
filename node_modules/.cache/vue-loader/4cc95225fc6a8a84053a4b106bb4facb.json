{"remainingRequest":"D:\\extrust\\eboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\extrust\\eboard\\src\\components\\appBar\\AppBarNotification.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\extrust\\eboard\\src\\components\\appBar\\AppBarNotification.vue","mtime":1709610038302},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js","mtime":1689230675098},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\vue-loader\\lib\\index.js","mtime":1689230676606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1kaUJlbGxPdXRsaW5lIH0gZnJvbSAiQG1kaS9qcyI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKCmltcG9ydCBhcHBCYXJOb3RpZmljYXRpb25TdG9yZU1vZHVsZSBmcm9tICIuL2FwcEJhck5vdGlmaWNhdGlvblN0b3JlTW9kdWxlIjsKY29uc3QgQVBQQkFSX05PVElGSUNBVElPTl9TVE9SRV9NT0RVTEVfTkFNRSA9ICJhcHBOb3RpZmljYXRpb24iOwoKLy8gM3JkIFBhcnR5CmltcG9ydCB7IFBlcmZlY3RTY3JvbGxiYXIgfSBmcm9tICJ2dWUyLXBlcmZlY3Qtc2Nyb2xsYmFyIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBQZXJmZWN0U2Nyb2xsYmFyLAogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBub3RpZmljYXRpb25zRGF0YSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmFwcE5vdGlmaWNhdGlvbi5kYXRhSXRlbUxpc3Q7CiAgICB9LAoKICAgIG5ld05vdGlmaWNhdGlvbkNudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmFwcE5vdGlmaWNhdGlvbi5uZXdOb3RpZmljYXRpb25DbnQ7CiAgICB9LAogIH0sCgogIGRhdGEoKSB7CiAgICBpZiAoIXN0b3JlLmhhc01vZHVsZShBUFBCQVJfTk9USUZJQ0FUSU9OX1NUT1JFX01PRFVMRV9OQU1FKSkgewogICAgICBzdG9yZS5yZWdpc3Rlck1vZHVsZSgKICAgICAgICBBUFBCQVJfTk9USUZJQ0FUSU9OX1NUT1JFX01PRFVMRV9OQU1FLAogICAgICAgIGFwcEJhck5vdGlmaWNhdGlvblN0b3JlTW9kdWxlCiAgICAgICk7CiAgICB9CgogICAgY29uc3QgcGVyZmVjdFNjcm9sbGJhck9wdGlvbnMgPSB7CiAgICAgIG1heFNjcm9sbGJhckxlbmd0aDogNjAsCiAgICAgIHdoZWVsUHJvcGFnYXRpb246IGZhbHNlLAogICAgfTsKCiAgICByZXR1cm4gewogICAgICBwZXJmZWN0U2Nyb2xsYmFyT3B0aW9ucywKICAgICAgaWNvbnM6IHsgbWRpQmVsbE91dGxpbmUgfSwKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgc2V0U2VsZWN0ZWRJdGVtKGl0ZW0pIHsKICAgICAgY29uc29sZS5sb2coaXRlbSk7CiAgICAgIHN0b3JlLmNvbW1pdCgiYXBwTm90aWZpY2F0aW9uL1NFVF9TRUxFQ1RFRF9JVEVNIiwgaXRlbSk7CiAgICB9LAoKICAgIGlzTmV3Tm90aWZpY2F0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYXBwTm90aWZpY2F0aW9uLmlzTmV3Tm90aWZpY2F0aW9uOwogICAgfSwKCiAgICBmZXRjaEV2ZW50cygpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goYCR7QVBQQkFSX05PVElGSUNBVElPTl9TVE9SRV9NT0RVTEVfTkFNRX0vZmV0Y2hFdmVudHNgKTsKICAgIH0sCiAgICBnZXRUeXBlQ2xhc3ModmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlID09ICJFIgogICAgICAgID8gInYtYXZhdGFyLWxpZ2h0LWJnIGVycm9yLS10ZXh0IGp1c3RpZnktY2VudGVyIgogICAgICAgIDogInYtYXZhdGFyLWxpZ2h0LWJnIHByaW1hcnktLXRleHQganVzdGlmeS1jZW50ZXIiOwogICAgfSwKICAgIHNldExpbWl0VGV4dCh0eXBlLCB2YWx1ZSkgewogICAgICBsZXQgcnRuVmFsdWUgPSAiIjsKCiAgICAgIGlmICh0eXBlID09ICJUIikgewogICAgICAgIHJ0blZhbHVlID0gdmFsdWUubGVuZ3RoID4gMjAgPyB2YWx1ZS5zdWJzdHJpbmcoMCwgMjApICsgIiAuLi4iIDogdmFsdWU7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlID09ICJTIikgewogICAgICAgIHJ0blZhbHVlID0gdmFsdWUubGVuZ3RoID4gNDAgPyB2YWx1ZS5zdWJzdHJpbmcoMCwgNDApICsgIiAuLi4iIDogdmFsdWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBydG5WYWx1ZTsKICAgIH0sCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hFdmVudHMoKTsKICB9LAp9Owo="},{"version":3,"sources":["AppBarNotification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AppBarNotification.vue","sourceRoot":"src/components/appBar","sourcesContent":["<template>\n  <v-menu\n    offset-y\n    left\n    nudge-bottom=\"22\"\n    :elevation=\"$vuetify.theme.dark ? 9 : 8\"\n    content-class=\"list-style notification-menu-content\"\n  >\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-badge v-if=\"isNewNotification\" dot offset-x=\"10\" offset-y=\"10\" />\n\n      <v-icon v-bind=\"attrs\" v-on=\"on\">\n        {{ icons.mdiBellOutline }}\n      </v-icon>\n    </template>\n    <v-card class=\"app-bar-notification-content-container\">\n      <perfect-scrollbar\n        class=\"ps-user-notifications\"\n        :options=\"perfectScrollbarOptions\"\n      >\n        <v-list class=\"py-0\">\n          <!-- Header -->\n          <v-list-item class=\"d-flex\" link>\n            <div class=\"d-flex align-center justify-space-between flex-grow-1\">\n              <span class=\"font-weight-semibold\">Notifications</span>\n              <v-chip\n                class=\"v-chip-light-bg primary--text font-weight-semibold\"\n                small\n              >\n                {{ newNotificationCnt }} NEW\n              </v-chip>\n            </div>\n          </v-list-item>\n          <v-divider></v-divider>\n\n          <!-- Notifications -->\n          <template v-for=\"(notification, index) in notificationsData\">\n            <v-list-item\n              :key=\"notification.ID\"\n              @click=\"setSelectedItem(notification)\"\n              link\n            >\n              <!-- Avatar -->\n              <v-list-item-avatar\n                :class=\"getTypeClass(notification.TYPE)\"\n                size=\"38\"\n              >\n                <v-tooltip top>\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      color=\"#2A3B4D\"\n                      :class=\"getTypeClass(notification.TYPE)\"\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                    >\n                      <span class=\"text-lg\">{{ notification.TYPE }}</span>\n                    </v-btn>\n                  </template>\n                  <span>{{ notification.TYPE_NM }}</span>\n                </v-tooltip>\n              </v-list-item-avatar>\n\n              <!-- Content -->\n              <v-list-item-content class=\"d-block\">\n                <v-list-item-title class=\"text-sm font-weight-semibold\">\n                  {{ setLimitText(\"T\", notification.SUBJECT) }}\n                </v-list-item-title>\n                <v-list-item-subtitle class=\"text-sm\">\n                  {{ setLimitText(\"S\", notification.CONTENTS) }}\n                </v-list-item-subtitle>\n              </v-list-item-content>\n\n              <!-- Item Action/Time -->\n              <v-list-item-action>\n                <span class=\"text--secondary text-xs\">{{\n                  notification.STD_DATE\n                }}</span>\n              </v-list-item-action>\n            </v-list-item>\n            <v-divider :key=\"index\"></v-divider>\n          </template>\n          <router-link to=\"/notif/NotificationList\">\n            <v-list-item key=\"read-all-btn\" class=\"read-all-btn-list-item\">\n              <v-btn block color=\"primary\"> Read All Notifications </v-btn>\n            </v-list-item>\n          </router-link>\n\n          <v-divider></v-divider>\n        </v-list>\n      </perfect-scrollbar>\n    </v-card>\n  </v-menu>\n</template>\n\n<script>\nimport { mdiBellOutline } from \"@mdi/js\";\nimport store from \"@/store\";\n\nimport appBarNotificationStoreModule from \"./appBarNotificationStoreModule\";\nconst APPBAR_NOTIFICATION_STORE_MODULE_NAME = \"appNotification\";\n\n// 3rd Party\nimport { PerfectScrollbar } from \"vue2-perfect-scrollbar\";\n\nexport default {\n  components: {\n    PerfectScrollbar,\n  },\n\n  computed: {\n    notificationsData() {\n      return this.$store.state.appNotification.dataItemList;\n    },\n\n    newNotificationCnt() {\n      return this.$store.state.appNotification.newNotificationCnt;\n    },\n  },\n\n  data() {\n    if (!store.hasModule(APPBAR_NOTIFICATION_STORE_MODULE_NAME)) {\n      store.registerModule(\n        APPBAR_NOTIFICATION_STORE_MODULE_NAME,\n        appBarNotificationStoreModule\n      );\n    }\n\n    const perfectScrollbarOptions = {\n      maxScrollbarLength: 60,\n      wheelPropagation: false,\n    };\n\n    return {\n      perfectScrollbarOptions,\n      icons: { mdiBellOutline },\n    };\n  },\n\n  methods: {\n    setSelectedItem(item) {\n      console.log(item);\n      store.commit(\"appNotification/SET_SELECTED_ITEM\", item);\n    },\n\n    isNewNotification() {\n      return this.$store.state.appNotification.isNewNotification;\n    },\n\n    fetchEvents() {\n      store.dispatch(`${APPBAR_NOTIFICATION_STORE_MODULE_NAME}/fetchEvents`);\n    },\n    getTypeClass(value) {\n      return value == \"E\"\n        ? \"v-avatar-light-bg error--text justify-center\"\n        : \"v-avatar-light-bg primary--text justify-center\";\n    },\n    setLimitText(type, value) {\n      let rtnValue = \"\";\n\n      if (type == \"T\") {\n        rtnValue = value.length > 20 ? value.substring(0, 20) + \" ...\" : value;\n      }\n\n      if (type == \"S\") {\n        rtnValue = value.length > 40 ? value.substring(0, 40) + \" ...\" : value;\n      }\n\n      return rtnValue;\n    },\n  },\n\n  created() {\n    this.fetchEvents();\n  },\n};\n</script>\n"]}]}