{"remainingRequest":"D:\\extrust\\eboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\extrust\\eboard\\src\\views\\comm\\AttendScanQRCode.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\extrust\\eboard\\src\\views\\comm\\AttendScanQRCode.vue","mtime":1694155723540},{"path":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js","mtime":1689230675098},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\vue-loader\\lib\\index.js","mtime":1689230676606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtZGlDbG9zZSwgbWRpQ2hlY2tCb2xkLCBtZGlDaGVja0RlY2FncmFtT3V0bGluZSB9IGZyb20gJ0BtZGkvanMnOw0KDQppbXBvcnQgeyBRcmNvZGVTdHJlYW0gfSBmcm9tICd2dWUtcXJjb2RlLXJlYWRlcic7DQppbXBvcnQgYnVzIGZyb20gJy4uLy4uL3V0aWxzL2J1cy5qcyc7DQppbXBvcnQgeyBnZXRNb250aE5hbWUsIGdldERhdGUgfSBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0aW9uJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KCWNvbXBvbmVudHM6IHsgUXJjb2RlU3RyZWFtIH0sDQoJZGF0YSgpIHsNCgkJcmV0dXJuIHsNCgkJCS8vIGljb24NCgkJCWljb25zOiB7DQoJCQkJbWRpQ2xvc2UsDQoJCQl9LA0KCQkJaXNWYWxpZDogdW5kZWZpbmVkLA0KCQkJY2FtZXJhOiAnYXV0bycsDQoJCQlyZXN1bHQ6IG51bGwsDQoJCQltb250aDogZ2V0TW9udGhOYW1lKCksDQoJCQluZGF0ZTogZ2V0RGF0ZSgpLA0KCQkJbWRpQ2hlY2tCb2xkLA0KCQkJbWRpQ2hlY2tEZWNhZ3JhbU91dGxpbmUsDQoJCX07DQoJfSwNCg0KCWNvbXB1dGVkOiB7DQoJCXZhbGlkYXRpb25QZW5kaW5nKCkgew0KCQkJcmV0dXJuIHRoaXMuaXNWYWxpZCA9PT0gdW5kZWZpbmVkICYmIHRoaXMuY2FtZXJhID09PSAnb2ZmJzsNCgkJfSwNCg0KCQl2YWxpZGF0aW9uU3VjY2VzcygpIHsNCgkJCXJldHVybiB0aGlzLmlzVmFsaWQgPT09IHRydWU7DQoJCX0sDQoNCgkJdmFsaWRhdGlvbkZhaWx1cmUoKSB7DQoJCQlyZXR1cm4gdGhpcy5pc1ZhbGlkID09PSBmYWxzZTsNCgkJfSwNCg0KCQlpc0NhbWVyYU9uKCkgew0KCQkJcmV0dXJuIHRoaXMuY2FtZXJhICE9ICdjbG9zZSc7DQoJCX0sDQoJfSwNCg0KCWJlZm9yZURlc3Ryb3koKSB7DQoJCWNvbnNvbGUuaW5mbygnLS0tLS0tLSDrqZTsnbgg7Y6Y7J207KeAIOyVhOybg+yLnCAtLS0tLS0tLS0tLS0tLS0tLS0tLScpOw0KCX0sDQoNCgltZXRob2RzOiB7DQoJCW9uSW5pdChwcm9taXNlKSB7DQoJCQlwcm9taXNlLmNhdGNoKGNvbnNvbGUuZXJyb3IpLnRoZW4odGhpcy5yZXNldFZhbGlkYXRpb25TdGF0ZSk7DQoJCX0sDQoNCgkJcmVzZXRWYWxpZGF0aW9uU3RhdGUoKSB7DQoJCQl0aGlzLmlzVmFsaWQgPSB1bmRlZmluZWQ7DQoJCX0sDQoNCgkJYXN5bmMgb25EZWNvZGUoY29udGVudCkgew0KCQkJdGhpcy5yZXN1bHQgPSBjb250ZW50Ow0KCQkJdGhpcy50dXJuQ2FtZXJhT2ZmKCk7DQoJCQkvL3RoaXMuaXNWYWxpZCA9IGNvbnRlbnQuc3RhcnRzV2l0aCgnaHR0cCcpOw0KDQoJCQkvLyBwcmV0ZW5kIGl0J3MgdGFraW5nIHJlYWxseSBsb25nDQoJCQkvL2F3YWl0IHRoaXMudGltZW91dCgxMDAwKTsNCg0KCQkJLy8gc29tZSBtb3JlIGRlbGF5LCBzbyB1c2VycyBoYXZlIHRpbWUgdG8gcmVhZCB0aGUgbWVzc2FnZQ0KCQkJLy9hd2FpdCB0aGlzLnRpbWVvdXQoMTAwKTsNCg0KCQkJLy9zdGFydCBzcGlubmVyDQoJCQkvL2J1cy4kZW1pdCgnc3RhcnQ6c3Bpbm5lcicpOw0KCQkJdGhpcy5nZXRMb2NhdGlvbkluZm8oY29udGVudCk7DQoJCQkvL3RoaXMudG9QYXNzUm91dGVyKGNvbnRlbnQpOw0KCQl9LA0KDQoJCXR1cm5DYW1lcmFPbigpIHsNCgkJCXRoaXMuY2FtZXJhID0gJ2F1dG8nOw0KCQl9LA0KDQoJCXR1cm5DYW1lcmFPZmYoKSB7DQoJCQl0aGlzLmNhbWVyYSA9ICdvZmYnOw0KCQl9LA0KDQoJCXRpbWVvdXQobXMpIHsNCgkJCXJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCgkJCQl3aW5kb3cuc2V0VGltZW91dChyZXNvbHZlLCBtcyk7DQoJCQl9KTsNCgkJfSwNCg0KCQlnZXRMb2NhdGlvbkluZm8oY29udGVudCkgew0KCQkJLy8gImdldExvY2F0aW9uSW5mbyLripQgcmVhY3QtbmF0aXZl7JeQ7IScIOuwm+uKlCDrqZTshJzrk5wg7J2066aE7J6F64uI64ukLg0KCQkJd2luZG93LndlYlZpZXdCcmlkZ2Uuc2VuZCgNCgkJCQknZ2V0TG9jYXRpb25JbmZvJywNCgkJCQknJywNCgkJCQlyZXMgPT4gew0KCQkJCQl0aGlzLnJlc3VsdCA9IEpTT04uc3RyaW5naWZ5KHJlcyk7DQoJCQkJCS8vYnVzLiRlbWl0KCdlbmQ6c3Bpbm5lcicpOw0KCQkJCQl0aGlzLnRvUGFzc1JvdXRlcihjb250ZW50KTsNCgkJCQl9LA0KCQkJCWVyciA9PiB7DQoJCQkJCWFsZXJ0KCduYXRpdmUgZXJycjo6OjonLCBlcnIudG9TdHJpbmcoKSk7DQoJCQkJCWNvbnNvbGUuZXJyb3IoZXJyKTsNCgkJCQl9LA0KCQkJKTsNCgkJfSwNCg0KCQl0b1Bhc3NSb3V0ZXIoY29udGVudCkgew0KCQkJdGhpcy4kcm91dGVyLnB1c2goew0KCQkJCW5hbWU6ICdBdHRlbmRTY2FuUVJSZXN1bHQnLA0KCQkJCXBhcmFtczogeyBzY2FuZGF0YTogY29udGVudCwgZ3BzSW5mbzogdGhpcy5yZXN1bHQgfSwNCgkJCX0pOw0KCQl9LA0KCX0sDQp9Ow0K"},{"version":3,"sources":["AttendScanQRCode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AttendScanQRCode.vue","sourceRoot":"src/views/comm","sourcesContent":["<template>\r\n\t<div class=\"\">\r\n\t\t<div class=\"auth-inner\">\r\n\t\t\t<v-card class=\"auth-card\">\r\n\t\t\t\t<v-card-title class=\"d-flex align-center justify-center py-7\">\r\n\t\t\t\t\t<qrcode-stream @decode=\"onDecode\" @init=\"onInit\">\r\n\t\t\t\t\t\t<div v-if=\"validationSuccess\" class=\"validation-success\">\r\n\t\t\t\t\t\t\tThe attendance check is complete.\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div v-if=\"validationFailure\" class=\"validation-failure\">\r\n\t\t\t\t\t\t\tThis is NOT a URL!\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div v-if=\"validationPending\" class=\"validation-pending\">\r\n\t\t\t\t\t\t\tLong validation in progress...\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</qrcode-stream>\r\n\t\t\t\t</v-card-title>\r\n\r\n\t\t\t\t<v-card-text class=\"d-flex align-center mt-5\">\r\n\t\t\t\t\t<v-avatar\r\n\t\t\t\t\t\tsize=\"54\"\r\n\t\t\t\t\t\trounded\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tclass=\"v-avatar-light-bg primary--text mt-1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span class=\"font-weight-medium\">\r\n\t\t\t\t\t\t\t\t{{ month }}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<p class=\"text-xl primary--text font-weight-bold mb-0\">\r\n\t\t\t\t\t\t\t\t{{ ndate }}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</v-avatar>\r\n\r\n\t\t\t\t\t<div class=\"ms-3\">\r\n\t\t\t\t\t\t<h4 class=\"text-base font-weight-semibold\">\r\n\t\t\t\t\t\t\t{{ this.$store.state.userInfo.userName }}\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t<p class=\"text-xs mb-0\">Please scan QRcode in the sales office</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</v-card-text>\r\n\r\n\t\t\t\t<v-card-text>\r\n\t\t\t\t\t<v-divider></v-divider>\r\n\t\t\t\t</v-card-text>\r\n\r\n\t\t\t\t<template v-if=\"validationSuccess\">\r\n\t\t\t\t\t<v-card-text class=\"d-flex align-center mt-5\">\r\n\t\t\t\t\t\t<v-avatar size=\"54\" rounded>\r\n\t\t\t\t\t\t\t<v-icon size=\"30\" color=\"success\"> {{ mdiCheckBold }} </v-icon>\r\n\t\t\t\t\t\t</v-avatar>\r\n\r\n\t\t\t\t\t\t<div class=\"ms-3\">\r\n\t\t\t\t\t\t\t<p class=\"text-xs mb-0\">{{ result }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</v-card-text>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-if=\"validationFailure\">\r\n\t\t\t\t\t<v-card-text class=\"d-flex align-center mt-5\">\r\n\t\t\t\t\t\t<v-avatar size=\"54\" rounded>\r\n\t\t\t\t\t\t\t<v-icon size=\"30\" color=\"error\">\r\n\t\t\t\t\t\t\t\t{{ mdiCheckDecagramOutline }}\r\n\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t</v-avatar>\r\n\r\n\t\t\t\t\t\t<div class=\"ms-3\">\r\n\t\t\t\t\t\t\t<p class=\"text-xs mb-0\">{{ result }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</v-card-text>\r\n\t\t\t\t</template>\r\n\t\t\t</v-card>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mdiClose, mdiCheckBold, mdiCheckDecagramOutline } from '@mdi/js';\r\n\r\nimport { QrcodeStream } from 'vue-qrcode-reader';\r\nimport bus from '../../utils/bus.js';\r\nimport { getMonthName, getDate } from '../../utils/validation';\r\n\r\nexport default {\r\n\tcomponents: { QrcodeStream },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// icon\r\n\t\t\ticons: {\r\n\t\t\t\tmdiClose,\r\n\t\t\t},\r\n\t\t\tisValid: undefined,\r\n\t\t\tcamera: 'auto',\r\n\t\t\tresult: null,\r\n\t\t\tmonth: getMonthName(),\r\n\t\t\tndate: getDate(),\r\n\t\t\tmdiCheckBold,\r\n\t\t\tmdiCheckDecagramOutline,\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tvalidationPending() {\r\n\t\t\treturn this.isValid === undefined && this.camera === 'off';\r\n\t\t},\r\n\r\n\t\tvalidationSuccess() {\r\n\t\t\treturn this.isValid === true;\r\n\t\t},\r\n\r\n\t\tvalidationFailure() {\r\n\t\t\treturn this.isValid === false;\r\n\t\t},\r\n\r\n\t\tisCameraOn() {\r\n\t\t\treturn this.camera != 'close';\r\n\t\t},\r\n\t},\r\n\r\n\tbeforeDestroy() {\r\n\t\tconsole.info('------- 메인 페이지 아웃시 --------------------');\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tonInit(promise) {\r\n\t\t\tpromise.catch(console.error).then(this.resetValidationState);\r\n\t\t},\r\n\r\n\t\tresetValidationState() {\r\n\t\t\tthis.isValid = undefined;\r\n\t\t},\r\n\r\n\t\tasync onDecode(content) {\r\n\t\t\tthis.result = content;\r\n\t\t\tthis.turnCameraOff();\r\n\t\t\t//this.isValid = content.startsWith('http');\r\n\r\n\t\t\t// pretend it's taking really long\r\n\t\t\t//await this.timeout(1000);\r\n\r\n\t\t\t// some more delay, so users have time to read the message\r\n\t\t\t//await this.timeout(100);\r\n\r\n\t\t\t//start spinner\r\n\t\t\t//bus.$emit('start:spinner');\r\n\t\t\tthis.getLocationInfo(content);\r\n\t\t\t//this.toPassRouter(content);\r\n\t\t},\r\n\r\n\t\tturnCameraOn() {\r\n\t\t\tthis.camera = 'auto';\r\n\t\t},\r\n\r\n\t\tturnCameraOff() {\r\n\t\t\tthis.camera = 'off';\r\n\t\t},\r\n\r\n\t\ttimeout(ms) {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\twindow.setTimeout(resolve, ms);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgetLocationInfo(content) {\r\n\t\t\t// \"getLocationInfo\"는 react-native에서 받는 메서드 이름입니다.\r\n\t\t\twindow.webViewBridge.send(\r\n\t\t\t\t'getLocationInfo',\r\n\t\t\t\t'',\r\n\t\t\t\tres => {\r\n\t\t\t\t\tthis.result = JSON.stringify(res);\r\n\t\t\t\t\t//bus.$emit('end:spinner');\r\n\t\t\t\t\tthis.toPassRouter(content);\r\n\t\t\t\t},\r\n\t\t\t\terr => {\r\n\t\t\t\t\talert('native errr::::', err.toString());\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\ttoPassRouter(content) {\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tname: 'AttendScanQRResult',\r\n\t\t\t\tparams: { scandata: content, gpsInfo: this.result },\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '@core/preset/preset/pages/auth.scss';\r\n#camera {\r\n\ttext-align: center;\r\n\tcolor: #2c3e50;\r\n}\r\n#video {\r\n\tbackground-color: #000000;\r\n}\r\n#canvas {\r\n\tdisplay: none;\r\n}\r\nli {\r\n\tdisplay: inline;\r\n\tpadding: 5px;\r\n}\r\n.validation-success,\r\n.validation-failure,\r\n.validation-pending {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\r\n\tbackground-color: rgba(255, 255, 255, 0.8);\r\n\ttext-align: center;\r\n\tfont-weight: bold;\r\n\tfont-size: 1.4rem;\r\n\tpadding: 10px;\r\n\r\n\tdisplay: flex;\r\n\tflex-flow: column nowrap;\r\n\tjustify-content: center;\r\n}\r\n.validation-success {\r\n\tcolor: green;\r\n}\r\n.validation-failure {\r\n\tcolor: red;\r\n}\r\n</style>\r\n"]}]}