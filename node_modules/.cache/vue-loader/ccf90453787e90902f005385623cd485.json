{"remainingRequest":"D:\\extrust\\eboard.coway.com.my\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\extrust\\eboard.coway.com.my\\src\\views\\dashboard\\sales\\DashboardCardSalesRankingbyHM.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\extrust\\eboard.coway.com.my\\src\\views\\dashboard\\sales\\DashboardCardSalesRankingbyHM.vue","mtime":1712116102200},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\babel-loader\\lib\\index.js","mtime":1689230675098},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\vue-loader\\lib\\index.js","mtime":1689230676606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1kaURvdHNWZXJ0aWNhbCwgbWRpQ2hldnJvblVwLCBtZGlDaGV2cm9uRG93biB9IGZyb20gIkBtZGkvanMiOwoKaW1wb3J0IHNhbGVzQXBpIGZyb20gIi4uLy4uLy4uL2FwaS9zYWxlc0FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBiZWZvcmVEZXN0cm95KCkgewogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxpbmcpOwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB2YXIgY0RhdGEgPSBbXTsKCiAgICBjb25zdCB1c2VyID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlck5hbWU7CiAgICB0aGlzLmNhbGxBcGlSaW5rRm9yR01EYXRhKCkudGhlbihmdW5jdGlvbiAocmVxdWVzdCkgewogICAgICByZXF1ZXN0LmRhdGEuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh2LCBpbmRleCkgewogICAgICAgIC8vY29uc29sZS5sb2codik7CiAgICAgICAgdmFyIG5ld1ZhbHVlID0gewogICAgICAgICAgcmFuazogdi5STkssCiAgICAgICAgICBuYW1lOiBgKCR7di5NRU1fQ09ERX0pJHt2Lk5BTUV9YC5zdWJzdHJpbmcoMCwgMjUpLAogICAgICAgICAgc2FsZXM6IHYuTkVUU0FMRVMsCiAgICAgICAgICBjb2xvcjogdi5STksgPT0gIjEiID8gIndhcm5pbmciIDogInNlY29uZGFyeSIsCiAgICAgICAgICBjaGFuZ2U6IHYuVEFSR0VULAogICAgICAgICAgb3JnY29kZTogdi5PUkdfQ09ERSwKICAgICAgICB9OwogICAgICAgIGNEYXRhLnB1c2gobmV3VmFsdWUpOwogICAgICAgIGlmICh2Lk1FTV9DT0RFID09IHVzZXIpIHsKICAgICAgICAgIGNEYXRhLm15cmFuayA9IGluZGV4OwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgICB0aGlzLnNhbGVzQnlDb3VudHJpZXMgPSBjRGF0YTsKICAgIHRoaXMuc2hvdyA9IHRydWU7CgogICAgdGhpcy5wb2xsRGF0YSA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuY0RhdGEgPSBbXTsKICAgICAgdGhpcy5zYWxlc0J5Q291bnRyaWVzLnNwbGljZSgwKTsKICAgICAgdGhpcy5jRGF0YS5zcGxpY2UoMCk7CgogICAgICB0aGlzLmNhbGxBcGlSaW5rRm9yR01EYXRhKCkudGhlbigKICAgICAgICAocmVxdWVzdCkgPT4KICAgICAgICAgIHJlcXVlc3QuZGF0YS5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHYsIGluZGV4KSB7CiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHsKICAgICAgICAgICAgICByYW5rOiB2LlJOSywKICAgICAgICAgICAgICBuYW1lOiBgKCR7di5PUkdfQ09ERX0pJHt2Lk5BTUV9YC5zdWJzdHJpbmcoMCwgMjUpLAogICAgICAgICAgICAgIHNhbGVzOiB2Lk5FVFNBTEVTLAogICAgICAgICAgICAgIGNvbG9yOiB2LlJOSyA9PSAiMSIgPyAid2FybmluZyIgOiAic2Vjb25kYXJ5IiwKICAgICAgICAgICAgICBjaGFuZ2U6IHYuVEFSR0VULAogICAgICAgICAgICAgIG9yZ2NvZGU6IHYuT1JHX0NPREUsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNEYXRhLnB1c2gobmV3VmFsdWUpOwoKICAgICAgICAgICAgaWYgKHYuTUVNX0NPREUgPT0gdXNlcikgewogICAgICAgICAgICAgIGNEYXRhLm15cmFuayA9IGluZGV4OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKCiAgICAgICAgKHRoaXMuc2hvdyA9IHRydWUpCiAgICAgICk7CgogICAgICB0aGlzLnNhbGVzQnlDb3VudHJpZXMgPSBjRGF0YTsKICAgIH0sIDMwMDAwMCk7CiAgfSwKCiAgZGF0YSgpIHsKICAgIGNvbnN0IHNhbGVzQnlDb3VudHJpZXMgPSBbXTsKICAgIGNvbnN0IHNlbGVjdGVkSXRlbSA9IC0xOwogICAgY29uc3Qgc2VsSWR4ID0gLTE7CiAgICBjb25zdCBwb2xsaW5nID0gW107CiAgICByZXR1cm4gewogICAgICBzYWxlc0J5Q291bnRyaWVzLAogICAgICBzZWxlY3RlZEl0ZW0sCiAgICAgIHNlbElkeCwKICAgICAgcG9sbGluZywKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpRG90c1ZlcnRpY2FsLAogICAgICAgIG1kaUNoZXZyb25VcCwKICAgICAgICBtZGlDaGV2cm9uRG93biwKICAgICAgfSwKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgcmVzb2x2ZVVzZXJQcm9ncmVzc1ZhcmlhbnQocHJvZ3JzcykgewogICAgICBpZiAocHJvZ3JzcyA8PSAyNSkgcmV0dXJuICJ3YXJuaW5nIjsKICAgICAgaWYgKHByb2dyc3MgPiAyNSAmJiBwcm9ncnNzIDw9IDUwKSByZXR1cm4gImluZm8iOwogICAgICBpZiAocHJvZ3JzcyA+IDUwICYmIHByb2dyc3MgPD0gNzUpIHJldHVybiAic3VjY2VzcyI7CiAgICAgIGlmIChwcm9ncnNzID4gNzUpIHJldHVybiAiZXJyb3IiOwogICAgICByZXR1cm4gInNlY29uZGFyeSI7CiAgICB9LAogICAgZnVuX251bUZvcm1hdChudW1iZXIpIHsKICAgICAgY29uc3QgbmVGb3IgPSBudW1iZXIudG9TdHJpbmcoKS5yZXBsYWNlKC9cQig/PShcZHszfSkrKD8hXGQpKS9nLCAiLCIpOwogICAgICAvL2NvbnNvbGUubG9nKG5lRm9yKTsKICAgICAgcmV0dXJuIG5lRm9yOwogICAgfSwKCiAgICAgIAogICAgZnVuX3RvRml4ZWQodmFsKXsKICAgICAgICAgICAgaWYodmFsKXsKICAgICAgICAgICAgIHJldHVybiAgdmFsLnRvRml4ZWQoMik7CiAgICAgICAgICAgIH0KICAgIH0sCgogICAgZ290b0RldGFpbFZpZXcoKXsKCiAgICAgICAgY29uc3QgdXNlckluZm8gPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbzsKICAgICAgICBsZXQganVtcFJvdXRlID10aGlzLiRyb3V0ZXIuaGlzdG9yeS5jdXJyZW50LnBhdGg7CgogICAgICAgIGNvbnNvbGUubG9nKHVzZXJJbmZvLm1lbWJlckxldmVsLHVzZXJJbmZvLnVzZXJUeXBlSWQpCiAgICAgICAgaWYgKHVzZXJJbmZvLm1lbWJlckxldmVsID09IDAgCiAgICAgICAgICAgICAgICB8fCB1c2VySW5mby51c2VyVHlwZUlkID09IDQgKXsKICAgICAgICAgICAganVtcFJvdXRlID0nL3BlcmZvcm1hbmNlL05ldFNhbGVzUmVwb3J0JzsKICAgICAgICB9CgogICAgICAgIGlmICh1c2VySW5mby5tZW1iZXJMZXZlbCA9PSAxKXsKICAgICAgICAgICAganVtcFJvdXRlID0nL3BlcmZvcm1hbmNlL05ldFNhbGVzR01SZXBvcnQnOwogICAgICAgIH0KCiAgICAgICAgaWYgKHVzZXJJbmZvLm1lbWJlckxldmVsID09IDIpewogICAgICAgICAgICBqdW1wUm91dGUgPScvcGVyZm9ybWFuY2UvTmV0U2FsZXNTTVJlcG9ydCc7CiAgICAgICAgfQoKICAgICAgICBpZiAodXNlckluZm8ubWVtYmVyTGV2ZWwgPT0gMyl7CiAgICAgICAgICAgIGp1bXBSb3V0ZSA9Jy9wZXJmb3JtYW5jZS9OZXRTYWxlc0hNUmVwb3J0JzsKICAgICAgICB9CgogICAgICAgIGlmIChqdW1wUm91dGUgIT0gdGhpcy4kcm91dGVyLmhpc3RvcnkuY3VycmVudC5wYXRoKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChqdW1wUm91dGUpOwogICAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgY2FsbEFwaVJpbmtGb3JHTURhdGEoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdXNlckluZm8gPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbzsKICAgICAgICByZXR1cm4gYXdhaXQgc2FsZXNBcGkuZ2V0Umlua0ZvckhNRGF0YSh1c2VySW5mbyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["DashboardCardSalesRankingbyHM.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DashboardCardSalesRankingbyHM.vue","sourceRoot":"src/views/dashboard/sales","sourcesContent":["<template>\n  <v-card elevation=\"1\">\n    <v-card-title class=\"align-start\">\n      <span class=\"font-weight-semibold text-2xl\">Net Sales Ranking by HM</span>\n\n      <v-spacer></v-spacer>\n\n      <v-btn icon small class=\"me-n3 mt-n2\" @click=\"gotoDetailView()\">\n        <v-icon>\n          {{ icons.mdiDotsVertical }}\n        </v-icon>\n      </v-btn>\n    </v-card-title>\n\n    <v-card-actions>\n      <v-btn color=\"success\" text> Explore </v-btn>\n\n      <v-spacer></v-spacer>\n\n      <v-btn icon color=\"success\" @click=\"show = !show\">\n        <v-icon>{{ show ? icons.mdiChevronUp : icons.mdiChevronDown }}</v-icon>\n      </v-btn>\n    </v-card-actions>\n\n    <v-expand-transition>\n      <div v-show=\"show\">\n        <v-divider></v-divider>\n        <v-card-text>\n          <v-list>\n            <v-list-item-group\n              v-model=\"salesByCountries.myrank\"\n              active-class=\"border\"\n              color=\"indigo\"\n            >\n              <v-list-item\n                v-for=\"(data, index) in salesByCountries\"\n                :key=\"data.name\"\n                :class=\"`d-flex align-center px-0 ${index > 0 ? 'mt-4' : ''}`\"\n              >\n                <v-avatar\n                  :color=\"salesByCountries.myrank === index ? 'error' : ''\"\n                  size=\"30\"\n                  :class=\"`${data.color} white--text font-weight-medium me-3`\"\n                >\n                  <span class=\"text-base\">{{ data.rank }}</span>\n                </v-avatar>\n\n                <div class=\"d-flex align-center flex-grow-1 flex-wrap\">\n                  <div class=\"me-2\">\n                    <div class=\"font-weight-semibold\">\n                      <span class=\"text--primary text-xl me-1\">\n                        {{ fun_numFormat(data.sales) }}\n                      </span>\n                      <span class=\"text--primary text-x5 me-1\">\n                        ({{ data.orgcode }})\n                      </span>\n                      <!-- \n\t\t\t\t\t\t\t\t<v-icon\n\t\t\t\t\t\t\t\t\tsize=\"20\"\n\t\t\t\t\t\t\t\t\t:color=\"data.change.charAt(0) === '+' ? 'success' : 'error'\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\tdata.change.charAt(0) === '+'\n\t\t\t\t\t\t\t\t\t\t\t? icons.mdiChevronUp\n\t\t\t\t\t\t\t\t\t\t\t: icons.mdiChevronDown\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</v-icon>\n\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t:class=\"`text-xs ${\n\t\t\t\t\t\t\t\t\t\tdata.change.charAt(0) === '+'\n\t\t\t\t\t\t\t\t\t\t\t? 'success--text'\n\t\t\t\t\t\t\t\t\t\t\t: 'error--text'\n\t\t\t\t\t\t\t\t\t}`\"\n\t\t\t\t\t\t\t\t\t>{{ data.change.slice(1) }}</span\n\t\t\t\t\t\t\t\t> -->\n                    </div>\n\n                    <v-list-item-subtitle class=\"font-weight-semibold text-xs\">\n                      {{ data.name }}\n                    </v-list-item-subtitle>\n                  </div>\n\n                  <v-spacer></v-spacer>\n\n                  <div>\n                    <h4 class=\"font-weight-semibold\"></h4>\n                    <span class=\"text-xs\">{{  fun_toFixed(data.change)  }} %</span>\n                    <v-progress-linear\n                      height=\"6\"\n                      rounded\n                      class=\"project-progress mt-1\"\n                      :color=\"resolveUserProgressVariant(data.change)\"\n                      :value=\"data.change\"\n                    ></v-progress-linear>\n                  </div>\n                </div>\n              </v-list-item>\n            </v-list-item-group>\n          </v-list>\n        </v-card-text>\n      </div>\n    </v-expand-transition>\n  </v-card>\n</template>\n\n<script>\nimport { mdiDotsVertical, mdiChevronUp, mdiChevronDown } from \"@mdi/js\";\n\nimport salesApi from \"../../../api/salesApi\";\nexport default {\n  beforeDestroy() {\n    clearInterval(this.polling);\n  },\n\n  created() {\n    var cData = [];\n\n    const user = this.$store.state.userName;\n    this.callApiRinkForGMData().then(function (request) {\n      request.data.data.forEach(function (v, index) {\n        //console.log(v);\n        var newValue = {\n          rank: v.RNK,\n          name: `(${v.MEM_CODE})${v.NAME}`.substring(0, 25),\n          sales: v.NETSALES,\n          color: v.RNK == \"1\" ? \"warning\" : \"secondary\",\n          change: v.TARGET,\n          orgcode: v.ORG_CODE,\n        };\n        cData.push(newValue);\n        if (v.MEM_CODE == user) {\n          cData.myrank = index;\n        }\n      });\n    });\n\n    this.salesByCountries = cData;\n    this.show = true;\n\n    this.pollData = setInterval(() => {\n      this.show = false;\n      this.cData = [];\n      this.salesByCountries.splice(0);\n      this.cData.splice(0);\n\n      this.callApiRinkForGMData().then(\n        (request) =>\n          request.data.data.forEach(function (v, index) {\n            var newValue = {\n              rank: v.RNK,\n              name: `(${v.ORG_CODE})${v.NAME}`.substring(0, 25),\n              sales: v.NETSALES,\n              color: v.RNK == \"1\" ? \"warning\" : \"secondary\",\n              change: v.TARGET,\n              orgcode: v.ORG_CODE,\n            };\n            cData.push(newValue);\n\n            if (v.MEM_CODE == user) {\n              cData.myrank = index;\n            }\n          }),\n\n        (this.show = true)\n      );\n\n      this.salesByCountries = cData;\n    }, 300000);\n  },\n\n  data() {\n    const salesByCountries = [];\n    const selectedItem = -1;\n    const selIdx = -1;\n    const polling = [];\n    return {\n      salesByCountries,\n      selectedItem,\n      selIdx,\n      polling,\n      show: false,\n      icons: {\n        mdiDotsVertical,\n        mdiChevronUp,\n        mdiChevronDown,\n      },\n    };\n  },\n\n  methods: {\n    resolveUserProgressVariant(progrss) {\n      if (progrss <= 25) return \"warning\";\n      if (progrss > 25 && progrss <= 50) return \"info\";\n      if (progrss > 50 && progrss <= 75) return \"success\";\n      if (progrss > 75) return \"error\";\n      return \"secondary\";\n    },\n    fun_numFormat(number) {\n      const neFor = number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      //console.log(neFor);\n      return neFor;\n    },\n\n      \n    fun_toFixed(val){\n            if(val){\n             return  val.toFixed(2);\n            }\n    },\n\n    gotoDetailView(){\n\n        const userInfo = this.$store.state.userInfo;\n        let jumpRoute =this.$router.history.current.path;\n\n        console.log(userInfo.memberLevel,userInfo.userTypeId)\n        if (userInfo.memberLevel == 0 \n                || userInfo.userTypeId == 4 ){\n            jumpRoute ='/performance/NetSalesReport';\n        }\n\n        if (userInfo.memberLevel == 1){\n            jumpRoute ='/performance/NetSalesGMReport';\n        }\n\n        if (userInfo.memberLevel == 2){\n            jumpRoute ='/performance/NetSalesSMReport';\n        }\n\n        if (userInfo.memberLevel == 3){\n            jumpRoute ='/performance/NetSalesHMReport';\n        }\n\n        if (jumpRoute != this.$router.history.current.path) {\n          this.$router.push(jumpRoute);\n        }\n    },\n\n    async callApiRinkForGMData() {\n      try {\n        const userInfo = this.$store.state.userInfo;\n        return await salesApi.getRinkForHMData(userInfo);\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.project-progress {\n  min-width: 4rem;\n}\n.border {\n  border: 6px dashed orange;\n}\n</style>\n"]}]}