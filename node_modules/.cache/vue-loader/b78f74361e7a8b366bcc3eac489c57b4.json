{"remainingRequest":"D:\\extrust\\eboard.coway.com.my\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\extrust\\eboard.coway.com.my\\src\\views\\comm\\orderMgt\\OrderMgt.vue?vue&type=style&index=0&id=38bbbdde&lang=scss&scoped=true&","dependencies":[{"path":"D:\\extrust\\eboard.coway.com.my\\src\\views\\comm\\orderMgt\\OrderMgt.vue","mtime":1709258483429},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\css-loader\\dist\\cjs.js","mtime":1689230672011},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1689230680621},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\postcss-loader\\src\\index.js","mtime":1689230675067},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1689230669010},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard.coway.com.my\\node_modules\\vue-loader\\lib\\index.js","mtime":1689230676606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoua2V5d29yZElucHV0IHsKICBib3JkZXItcmFkaXVzOiA2LjY2NjY2NjY2N3B4OwogIGZvbnQtc2l6ZTogMTZweDsKICBsaW5lLWhlaWdodDogMjYuNjY2NjY2NjY3cHg7CiAgcGFkZGluZzogNi42NjY2NjY2NjdweDsKICB3aWR0aDogMTMzLjMzMzMzMzMzMyU7CgogIHRyYW5zZm9ybTogc2NhbGUoMC43NSk7CiAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCB0b3A7CgogIC8qIOyXrOq4sOulvCDstpTqsIDtlanri4jri6QuICovCiAgbWFyZ2luLWJvdHRvbTogLTEwcHg7CiAgbWFyZ2luLXJpZ2h0OiAtMzMuMzMzMzMzMzMzJTsKfQo="},{"version":3,"sources":["OrderMgt.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoZA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"OrderMgt.vue","sourceRoot":"src/views/comm/orderMgt","sourcesContent":["<template>\n  <v-row>\n    <v-col cols=\"12\" md=\"12\">\n      <v-card>\n        <v-card-title>\n          <span style=\"color: info; font-weight: bold\"\n            >Order Period</span\n          ></v-card-title\n        >\n        <v-card-text class=\"d-flex align-center flex-wrap pb-0\">\n          <div class=\"d-flex align-center pb-5\">\n            <v-dialog\n              ref=\"dialog\"\n              v-model=\"modal\"\n              :return-value.sync=\"date\"\n              persistent\n              width=\"290px\"\n            >\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-text-field\n                  v-model=\"date\"\n                  label=\"order date\"\n                  prepend-icon=\"mdi-calendar\"\n                  readonly\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                ></v-text-field>\n              </template>\n              <v-date-picker v-model=\"date\" type=\"month\" scrollable>\n                <v-spacer></v-spacer>\n                <v-btn text color=\"primary\" @click=\"modal = false\">\n                  Cancel\n                </v-btn>\n                <v-btn text color=\"primary\" @click=\"$refs.dialog.save(date)\">\n                  OK\n                </v-btn>\n              </v-date-picker>\n            </v-dialog>\n          </div>\n\n          <v-spacer></v-spacer>\n\n          <div class=\"d-flex align-center pb-5\">\n            <!-- create invoice -->\n            <v-btn color=\"primary\" class=\"me-3\" @click=\"fetchEvents()\">\n              <v-icon size=\"18\" class=\"me-1\">\n                {{ icons.mdiMagnifyPlusOutline }}\n              </v-icon>\n              <span>Search</span>\n            </v-btn>\n          </div>\n        </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\" md=\"12\">\n      <div class=\"px-4\">\n        <v-chip-group>\n          <VBadge\n            :content=\"staticCCPCnt\"\n            bordered\n            color=\"error\"\n            offset-x=\"20\"\n            offset-y=\"20\"\n          >\n            <v-chip\n              size=\"x-small\"\n              :color=\"setTagColor('C')\"\n              @click=\"keyEvents('CCP')\"\n              class=\"me-3\"\n            >\n              <span>CCP</span>\n            </v-chip>\n          </VBadge>\n          <VBadge\n            :content=\"staticEASCnt\"\n            bordered\n            color=\"error\"\n            offset-x=\"20\"\n            offset-y=\"20\"\n          >\n            <v-chip\n              :color=\"setTagColor('E')\"\n              @click=\"keyEvents('ECS')\"\n              class=\"me-3\"\n            >\n              <span>E-CASH</span>\n            </v-chip>\n          </VBadge>\n          <VBadge\n            :content=\"staticCAGCnt\"\n            bordered\n            color=\"error\"\n            offset-x=\"25\"\n            offset-y=\"20\"\n          >\n            <v-chip\n              :color=\"setTagColor('G')\"\n              @click=\"keyEvents('CAG')\"\n              class=\"me-3\"\n            >\n              <span>CALL LOG</span>\n            </v-chip>\n          </VBadge>\n          <VBadge\n            :content=\"staticINSCnt\"\n            bordered\n            color=\"error\"\n            offset-x=\"24\"\n            offset-y=\"20\"\n          >\n            <v-chip\n              :color=\"setTagColor('I')\"\n              @click=\"keyEvents('INS')\"\n              class=\"me-3\"\n            >\n              <span> INSTALL</span>\n            </v-chip>\n          </VBadge>\n        </v-chip-group>\n      </div>\n    </v-col>\n\n    <v-col cols=\"12\" md=\"12\">\n      <v-card\n        flat\n        class=\"knowledge-base-bg d-flex align-center justify-center text-center mb-7\"\n      >\n        <v-card-text>\n          <!-- <p class=\"kb-title text-2xl font-weight-semibold primary--text mb-2\"></p>\n\t\t\t\t\tHello, how can we help?\n\t\t\t\t</p>\n\t\t\t\t<p class=\"mb-7\">\n\t\t\t\t\tor choose a category to quickly find the help you need\n\n\t\t\t\t</p> -->\n\n          <v-form class=\"kb-search-input mx-auto\">\n            <v-text-field\n              v-model=\"orderNoSearchQuery\"\n              id=\"orderNoSearchQuery\"\n              outlined\n              placeholder=\"keyin a orderNo....\"\n              hide-details\n              class=\"kb-search-input keywordInput\"\n            >\n              <template #prepend-inner>\n                <v-icon size=\"23\" class=\"mx-1\">\n                  {{ icons.mdiMagnify }}\n                </v-icon>\n              </template>\n            </v-text-field>\n          </v-form>\n        </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\" md=\"12\">\n      <v-card>\n        <v-card-title class=\"align-start\">\n          <span style=\"color: info; font-weight: bold\">Your Order List</span>\n          <v-spacer></v-spacer>\n        </v-card-title>\n\n        <v-card-text>\n          <v-list dense>\n            <v-list-item-group color=\"primary\">\n              <v-list-item\n                v-for=\"(item, index) in events\"\n                :key=\"item.orderNo\"\n                :class=\"`d-flex align-center px-0 ${index > 0 ? 'mt-3' : ''}`\"\n              >\n                <template>\n                  <v-list-item-avatar size=\"38\" color=\"#000000\">\n                    <span style=\"color: #ffffff; font-weight: bold\">\n                      {{ index + 1 }}</span\n                    >\n                  </v-list-item-avatar>\n\n                  <div\n                    class=\"d-flex align-center flex-grow-1 flex-wrap text-no-wrap\"\n                  >\n                    <div class=\"me-2\">\n                      <v-list-item-title class=\"text-xs\">\n                        <span style=\"color: #330be9; font-weight: bold\">\n                          ( {{ item.orderNo }} )</span\n                        >\n                        {{ item.custName }}\n                      </v-list-item-title>\n\n                      <div class=\"d-flex align-center\">\n                        <v-list-item-subtitle class=\"mt-1 me-2 text-xs\">\n                          <v-icon size=\"14\" class=\"me-1\">\n                            {{ icons.mdiCalendarClockOutline }}\n                          </v-icon>\n                          <span style=\"font-weight: bold\">\n                            {{ item.ekeyInDate }}\n                          </span>\n\n                          <VBadge\n                            dot\n                            location=\"start center\"\n                            offset-x=\"2\"\n                            :color=\"setTagColor(item.orderStus)\"\n                            class=\"me-2\"\n                          />\n                          <span style=\"font-weight: bold\">\n                            {{ item.orderStus }}</span\n                          >\n                        </v-list-item-subtitle>\n                      </div>\n                    </div>\n                  </div>\n                  <v-spacer></v-spacer>\n                  <span> <orderDetail v-bind:item=\"item\"></orderDetail></span>\n                </template>\n              </v-list-item>\n            </v-list-item-group>\n          </v-list>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport {\n  mdiCalendarBlankOutline,\n  mdiDotsVertical,\n  mdiMagnify,\n  mdiMagnifyPlusOutline,\n  mdiCalendarClockOutline,\n  mdiCheckBold,\n  mdiLabelMultiple,\n  mdiMessageAlertOutline,\n  mdiQrcodeScan,\n  mdiAirplaneTakeoff,\n  mdiClipboardEditOutline,\n  mdiCalendarHeart,\n  mdiCancel,\n} from \"@mdi/js\";\n\nimport store from \"@/store\";\nimport orderMgtStoreModule from \"./orderMgtStoreModule\";\nimport orderDetail from \"./OrderDetailsItem.vue\";\nconst ORDER_MGT_APP_STORE_MODULE_NAME = \"app-ordermgt\";\n\nexport default {\n  data() {\n    if (!store.hasModule(ORDER_MGT_APP_STORE_MODULE_NAME)) {\n      store.registerModule(\n        ORDER_MGT_APP_STORE_MODULE_NAME,\n        orderMgtStoreModule\n      );\n    }\n    const orderNoSearchQuery = \"\";\n\n    return {\n      orderNoSearchQuery,\n      date: new Date().toISOString().substr(0, 7),\n      menu: false,\n      modal: false,\n      staticCCPCnt: 0,\n      staticEASCnt: 0,\n      staticCAGCnt: 0,\n      staticINSCnt: 0,\n      events: [],\n      oldEventsList: [],\n      icons: {\n        mdiDotsVertical,\n        mdiCalendarBlankOutline,\n        mdiMagnifyPlusOutline,\n        mdiCalendarClockOutline,\n        mdiCheckBold,\n        mdiLabelMultiple,\n        mdiMessageAlertOutline,\n        mdiQrcodeScan,\n        mdiAirplaneTakeoff,\n        mdiClipboardEditOutline,\n        mdiCalendarHeart,\n        mdiCancel,\n        mdiMagnify,\n      },\n    };\n  },\n  components: { orderDetail },\n  computed: {},\n\n  methods: {\n    keyEvents(type) {\n      const eObj = [];\n\n      this.oldEventsList.forEach((element) => {\n        if (element.orderStus == type) {\n          eObj.push(element);\n        }\n        this.events = [...eObj];\n      });\n\n      // return this.events.filter(item => {\n      // \titem.orderStus.toLowerCase().includes('ins');\n      // });\n    },\n\n    setOrderStus(item) {\n      if (item.INSTALL_STUS != null) {\n        this.staticINSCnt++;\n        return \"INS\";\n      }\n\n      if (item.CALL_LOG_STUS != null) {\n        this.staticCAGCnt++;\n        return \"CAG\";\n      }\n\n      if (item.ECASH_STUS != null) {\n        this.staticEASCnt++;\n        return \"ECS\";\n      }\n\n      if (item.CCP_STUS != null) {\n        this.staticCCPCnt++;\n        return \"CCP\";\n      }\n    },\n    convertData(rowItem) {\n      let item = {};\n\n      item.preOrdId = rowItem.PRE_ORD_ID;\n      item.salesOrdId = rowItem.SALES_ORD_ID;\n      item.salesRefNo = rowItem.SOF_NO;\n      item.appType = \"R\";\n      item.orderNo =\n        rowItem.SALES_ORD_NO == null ? rowItem.SOF_NO : rowItem.SALES_ORD_NO;\n      item.custName = rowItem.CUST_NAME.substr(0, 10);\n      item.ekeyInDate = rowItem.SALES_DT;\n      item.orderStus = this.setOrderStus(rowItem);\n      item.nric = rowItem.CUST_NRIC;\n      item.insStus = rowItem.INSTALL_STUS;\n      item.telNo = rowItem.TEL_M1;\n\n      return item;\n    },\n    fetchEvents(_type) {\n      this.staticCCPCnt = 0;\n      this.staticEASCnt = 0;\n      this.staticCAGCnt = 0;\n      this.staticINSCnt = 0;\n      this.events = [];\n\n      const parsedValue = this.date.replace(/-/g, \"\");\n      store\n        .dispatch(`${ORDER_MGT_APP_STORE_MODULE_NAME}/fetchEvents`, parsedValue)\n        .then((response) => {\n          let dataList = JSON.parse(JSON.stringify(response));\n\n          //console.log(dataList);\n          const eObj = [];\n\n          dataList.data.data.forEach((element) => {\n            eObj.push(this.convertData(element));\n            this.events = [...eObj];\n            this.oldEventsList = [...eObj];\n          });\n        })\n        .catch((error) => {\n          console.error(error);\n          console.error(error.response);\n        });\n    },\n\n    splitData(data, type) {\n      if (data === undefined || data == \"\" || data == null) return \"\";\n\n      return data.split(type);\n    },\n\n    setTagColor(typeCode) {\n      let tagIcon = \"info\";\n      if (typeCode == \"CCP\" || typeCode == \"C\") {\n        tagIcon = \"#514938\";\n      } else if (typeCode == \"ECS\" || typeCode == \"E\") {\n        tagIcon = \"#8b8687\";\n      } else if (typeCode == \"CAG\" || typeCode == \"G\") {\n        tagIcon = \"#23B5D3\";\n      } else if (typeCode == \"INS\" || typeCode == \"I\") {\n        tagIcon = \"#1F7872\";\n      }\n\n      return tagIcon;\n    },\n  },\n\n  watch: {\n    orderNoSearchQuery: function (ordNo) {\n      this.events = this.oldEventsList.filter(\n        (item) =>\n          item.orderNo.toLowerCase().includes(ordNo) ||\n          item.custName.toLowerCase().includes(ordNo)\n      );\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.keywordInput {\n  border-radius: 6.666666667px;\n  font-size: 16px;\n  line-height: 26.666666667px;\n  padding: 6.666666667px;\n  width: 133.333333333%;\n\n  transform: scale(0.75);\n  transform-origin: left top;\n\n  /* 여기를 추가합니다. */\n  margin-bottom: -10px;\n  margin-right: -33.333333333%;\n}\n</style>\n"]}]}