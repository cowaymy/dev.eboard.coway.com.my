{"remainingRequest":"D:\\extrust\\eboard\\node_modules\\thread-loader\\dist\\cjs.js!D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js!D:\\extrust\\eboard\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\extrust\\eboard\\src\\utils\\callRPT.js","dependencies":[{"path":"D:\\extrust\\eboard\\src\\utils\\callRPT.js","mtime":1709258483410},{"path":"D:\\extrust\\eboard\\babel.config.js","mtime":1707983434823},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1689230669007},{"path":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js","mtime":1689230675098},{"path":"D:\\extrust\\eboard\\node_modules\\eslint-loader\\index.js","mtime":1689230670675}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKaW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgYnVzIGZyb20gIi4vYnVzIjsKdmFyIGZpbGVOYW1lID0gIiI7CgpmdW5jdGlvbiBjYWxsUlBUKHJlcXVlc3RPcHRpb25zKSB7CiAgY29uc29sZS5sb2cocmVxdWVzdE9wdGlvbnMpOwogIHZhciBteUhlYWRlcnMgPSBuZXcgSGVhZGVycygpOwogIG15SGVhZGVycy5hcHBlbmQoIkNvb2tpZSIsICJmaWxlRG93bmxvYWQ9dHJ1ZSIpOwogIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSBteUhlYWRlcnM7CiAgZmlsZU5hbWUgPSByZXF1ZXN0T3B0aW9ucy5maWxlTmFtZTsKICB2YXIgcnB0dXJsID0gImh0dHBzOi8vZXRydXN0ZGV2Lm15LmNvd2F5LmNvbSI7IC8vc3RhcnQgc3Bpbm5lcgoKICBidXMuJGVtaXQoInN0YXJ0OnNwaW5uZXIiKTsKICBmZXRjaCgiIi5jb25jYXQocnB0dXJsLCAiL3JlcG9ydC8iKS5jb25jYXQocmVxdWVzdE9wdGlvbnMucnB0RnVuY1ZpZXdUeXBlKSwgcmVxdWVzdE9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICByZXR1cm4gcmVzcG9uc2UuYmxvYigpOwogIH0pLnRoZW4oZnVuY3Rpb24gKGJsb2IpIHsKICAgIGRvd25sb2FkRmlsZShibG9iKTsKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgIFZ1ZS50b2FzdGVkLmVycm9yKCJUaGVyZSB3YXMgYW4gcmVwb3J0IHNlcnZlciBpc3N1ZSBbIiArIGVycm9yICsgIl0iLCB7CiAgICAgIGljb246ICJlcnJvciIsCiAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IiwKICAgICAgYWN0aW9uOiB7CiAgICAgICAgdGV4dDogIkNsb3NlIiwKICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUsIHRvYXN0T2JqZWN0KSB7CiAgICAgICAgICB0b2FzdE9iamVjdC5nb0F3YXkoMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KS5nb0F3YXkoMzUwMCk7CiAgICBidXMuJGVtaXQoImVuZDpzcGlubmVyIik7CiAgfSk7Cn0KCmZ1bmN0aW9uIGRvd25sb2FkRmlsZShibG9iKSB7CiAgdmFyIF90aGlzID0gdGhpczsKCiAgdmFyIG5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZpbGVOYW1lOwogIHZhciBocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICB2YXIgYSA9IE9iamVjdC5hc3NpZ24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLCB7CiAgICBocmVmOiBocmVmLAogICAgc3R5bGU6ICJkaXNwbGF5Om5vbmUiLAogICAgZG93bmxvYWQ6IG5hbWUKICB9KTsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOwogIGEuY2xpY2soKTsKICBVUkwucmV2b2tlT2JqZWN0VVJMKGhyZWYpOwogIGEucmVtb3ZlKCk7CiAgVnVlLnRvYXN0ZWQuc3VjY2VzcygiSXQgaGFzIGJlZW4gZG93bmxvYWQgZmlsZSIsIHsKICAgIGljb246ICJjaGVjayIsCiAgICBwb3NpdGlvbjogImJvdHRvbS1yaWdodCIsCiAgICBhY3Rpb246IHsKICAgICAgdGV4dDogIkNsb3NlIiwKICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlLCB0b2FzdE9iamVjdCkgewogICAgICAgIF90aGlzLmJ0SXNBY3RpdmUgPSB0cnVlOwogICAgICAgIHRvYXN0T2JqZWN0LmdvQXdheSgwKTsKICAgICAgfQogICAgfQogIH0pLmdvQXdheSgyNTAwKTsKICBidXMuJGVtaXQoImVuZDpzcGlubmVyIik7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjYWxsUlBUOiBjYWxsUlBUCn07"},{"version":3,"sources":["D:/extrust/eboard/src/utils/callRPT.js"],"names":["Vue","bus","fileName","callRPT","requestOptions","console","log","myHeaders","Headers","append","headers","rpturl","$emit","fetch","rptFuncViewType","then","response","blob","downloadFile","catch","error","toasted","icon","position","action","text","onClick","e","toastObject","goAway","name","href","URL","createObjectURL","a","Object","assign","document","createElement","style","download","body","appendChild","click","revokeObjectURL","remove","success","btIsActive"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AAEA,IAAIC,QAAQ,GAAG,EAAf;;AAEA,SAASC,OAAT,CAAiBC,cAAjB,EAAiC;AAC/BC,EAAAA,OAAO,CAACC,GAAR,CAAYF,cAAZ;AAEA,MAAIG,SAAS,GAAG,IAAIC,OAAJ,EAAhB;AACAD,EAAAA,SAAS,CAACE,MAAV,CAAiB,QAAjB,EAA2B,mBAA3B;AACAL,EAAAA,cAAc,CAACM,OAAf,GAAyBH,SAAzB;AACAL,EAAAA,QAAQ,GAAGE,cAAc,CAACF,QAA1B;AAEA,MAAIS,MAAM,GAAG,gCAAb,CAR+B,CAU/B;;AACAV,EAAAA,GAAG,CAACW,KAAJ,CAAU,eAAV;AAEAC,EAAAA,KAAK,WAAIF,MAAJ,qBAAqBP,cAAc,CAACU,eAApC,GAAuDV,cAAvD,CAAL,CACGW,IADH,CACQ,UAACC,QAAD,EAAc;AAClB,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,GAHH,EAIGF,IAJH,CAIQ,UAACE,IAAD,EAAU;AACdC,IAAAA,YAAY,CAACD,IAAD,CAAZ;AACD,GANH,EAOGE,KAPH,CAOS,UAACC,KAAD,EAAW;AAChBpB,IAAAA,GAAG,CAACqB,OAAJ,CACGD,KADH,CACS,uCAAuCA,KAAvC,GAA+C,GADxD,EAC6D;AACzDE,MAAAA,IAAI,EAAE,OADmD;AAEzDC,MAAAA,QAAQ,EAAE,cAF+C;AAGzDC,MAAAA,MAAM,EAAE;AACNC,QAAAA,IAAI,EAAE,OADA;AAENC,QAAAA,OAAO,EAAE,iBAACC,CAAD,EAAIC,WAAJ,EAAoB;AAC3BA,UAAAA,WAAW,CAACC,MAAZ,CAAmB,CAAnB;AACD;AAJK;AAHiD,KAD7D,EAWGA,MAXH,CAWU,IAXV;AAYA5B,IAAAA,GAAG,CAACW,KAAJ,CAAU,aAAV;AACD,GArBH;AAsBD;;AAED,SAASM,YAAT,CAAsBD,IAAtB,EAA6C;AAAA;;AAAA,MAAjBa,IAAiB,uEAAV5B,QAAU;AAC3C,MAAM6B,IAAI,GAAGC,GAAG,CAACC,eAAJ,CAAoBhB,IAApB,CAAb;AACA,MAAMiB,CAAC,GAAGC,MAAM,CAACC,MAAP,CAAcC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd,EAA2C;AACnDP,IAAAA,IAAI,EAAJA,IADmD;AAEnDQ,IAAAA,KAAK,EAAE,cAF4C;AAGnDC,IAAAA,QAAQ,EAAEV;AAHyC,GAA3C,CAAV;AAKAO,EAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BR,CAA1B;AACAA,EAAAA,CAAC,CAACS,KAAF;AACAX,EAAAA,GAAG,CAACY,eAAJ,CAAoBb,IAApB;AACAG,EAAAA,CAAC,CAACW,MAAF;AACA7C,EAAAA,GAAG,CAACqB,OAAJ,CACGyB,OADH,CACW,2BADX,EACwC;AACpCxB,IAAAA,IAAI,EAAE,OAD8B;AAEpCC,IAAAA,QAAQ,EAAE,cAF0B;AAGpCC,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE,OADA;AAENC,MAAAA,OAAO,EAAE,iBAACC,CAAD,EAAIC,WAAJ,EAAoB;AAC3B,QAAA,KAAI,CAACmB,UAAL,GAAkB,IAAlB;AACAnB,QAAAA,WAAW,CAACC,MAAZ,CAAmB,CAAnB;AACD;AALK;AAH4B,GADxC,EAYGA,MAZH,CAYU,IAZV;AAcA5B,EAAAA,GAAG,CAACW,KAAJ,CAAU,aAAV;AACD;;AAED,eAAe;AACbT,EAAAA,OAAO,EAAPA;AADa,CAAf","sourcesContent":["import Vue from \"vue\";\nimport bus from \"./bus\";\n\nlet fileName = \"\";\n\nfunction callRPT(requestOptions) {\n  console.log(requestOptions);\n\n  var myHeaders = new Headers();\n  myHeaders.append(\"Cookie\", \"fileDownload=true\");\n  requestOptions.headers = myHeaders;\n  fileName = requestOptions.fileName;\n\n  let rpturl = \"https://etrustdev.my.coway.com\";\n\n  //start spinner\n  bus.$emit(\"start:spinner\");\n\n  fetch(`${rpturl}/report/${requestOptions.rptFuncViewType}`, requestOptions)\n    .then((response) => {\n      return response.blob();\n    })\n    .then((blob) => {\n      downloadFile(blob);\n    })\n    .catch((error) => {\n      Vue.toasted\n        .error(\"There was an report server issue [\" + error + \"]\", {\n          icon: \"error\",\n          position: \"bottom-right\",\n          action: {\n            text: \"Close\",\n            onClick: (e, toastObject) => {\n              toastObject.goAway(0);\n            },\n          },\n        })\n        .goAway(3500);\n      bus.$emit(\"end:spinner\");\n    });\n}\n\nfunction downloadFile(blob, name = fileName) {\n  const href = URL.createObjectURL(blob);\n  const a = Object.assign(document.createElement(\"a\"), {\n    href,\n    style: \"display:none\",\n    download: name,\n  });\n  document.body.appendChild(a);\n  a.click();\n  URL.revokeObjectURL(href);\n  a.remove();\n  Vue.toasted\n    .success(\"It has been download file\", {\n      icon: \"check\",\n      position: \"bottom-right\",\n      action: {\n        text: \"Close\",\n        onClick: (e, toastObject) => {\n          this.btIsActive = true;\n          toastObject.goAway(0);\n        },\n      },\n    })\n    .goAway(2500);\n\n  bus.$emit(\"end:spinner\");\n}\n\nexport default {\n  callRPT,\n};\n"]}]}