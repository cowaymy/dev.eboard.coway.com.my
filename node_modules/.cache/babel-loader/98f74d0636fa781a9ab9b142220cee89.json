{"remainingRequest":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js!D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\extrust\\eboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\extrust\\eboard\\src\\views\\comm\\AttendScanQRCode.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\extrust\\eboard\\src\\views\\comm\\AttendScanQRCode.vue","mtime":1686130547325},{"path":"D:\\extrust\\eboard\\babel.config.js","mtime":1639533184000},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js","mtime":1689230675098},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\vue-loader\\lib\\index.js","mtime":1689230676606}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxleHRydXN0XFxlYm9hcmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGFzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtZGlDbG9zZSwgbWRpQ2hlY2tCb2xkLCBtZGlDaGVja0RlY2FncmFtT3V0bGluZSB9IGZyb20gJ0BtZGkvanMnOwppbXBvcnQgeyBRcmNvZGVTdHJlYW0gfSBmcm9tICd2dWUtcXJjb2RlLXJlYWRlcic7CmltcG9ydCB7IGdldE1vbnRoTmFtZSwgZ2V0RGF0ZSB9IGZyb20gJy4uLy4uL3V0aWxzL3ZhbGlkYXRpb24nOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgUXJjb2RlU3RyZWFtOiBRcmNvZGVTdHJlYW0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBpY29uCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpQ2xvc2U6IG1kaUNsb3NlCiAgICAgIH0sCiAgICAgIGlzVmFsaWQ6IHVuZGVmaW5lZCwKICAgICAgY2FtZXJhOiAnYXV0bycsCiAgICAgIHJlc3VsdDogbnVsbCwKICAgICAgbW9udGg6IGdldE1vbnRoTmFtZSgpLAogICAgICBuZGF0ZTogZ2V0RGF0ZSgpLAogICAgICBtZGlDaGVja0JvbGQ6IG1kaUNoZWNrQm9sZCwKICAgICAgbWRpQ2hlY2tEZWNhZ3JhbU91dGxpbmU6IG1kaUNoZWNrRGVjYWdyYW1PdXRsaW5lCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZhbGlkYXRpb25QZW5kaW5nOiBmdW5jdGlvbiB2YWxpZGF0aW9uUGVuZGluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA9PT0gdW5kZWZpbmVkICYmIHRoaXMuY2FtZXJhID09PSAnb2ZmJzsKICAgIH0sCiAgICB2YWxpZGF0aW9uU3VjY2VzczogZnVuY3Rpb24gdmFsaWRhdGlvblN1Y2Nlc3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPT09IHRydWU7CiAgICB9LAogICAgdmFsaWRhdGlvbkZhaWx1cmU6IGZ1bmN0aW9uIHZhbGlkYXRpb25GYWlsdXJlKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID09PSBmYWxzZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uSW5pdDogZnVuY3Rpb24gb25Jbml0KHByb21pc2UpIHsKICAgICAgcHJvbWlzZS5jYXRjaChjb25zb2xlLmVycm9yKS50aGVuKHRoaXMucmVzZXRWYWxpZGF0aW9uU3RhdGUpOwogICAgfSwKICAgIHJlc2V0VmFsaWRhdGlvblN0YXRlOiBmdW5jdGlvbiByZXNldFZhbGlkYXRpb25TdGF0ZSgpIHsKICAgICAgdGhpcy5pc1ZhbGlkID0gdW5kZWZpbmVkOwogICAgfSwKICAgIG9uRGVjb2RlOiBmdW5jdGlvbiBvbkRlY29kZShjb250ZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLnJlc3VsdCA9IGNvbnRlbnQ7CgogICAgICAgICAgICAgICAgX3RoaXMudHVybkNhbWVyYU9mZigpOyAvL3RoaXMuaXNWYWxpZCA9IGNvbnRlbnQuc3RhcnRzV2l0aCgnaHR0cCcpOwogICAgICAgICAgICAgICAgLy8gcHJldGVuZCBpdCdzIHRha2luZyByZWFsbHkgbG9uZwogICAgICAgICAgICAgICAgLy9hd2FpdCB0aGlzLnRpbWVvdXQoMTAwMCk7CiAgICAgICAgICAgICAgICAvLyBzb21lIG1vcmUgZGVsYXksIHNvIHVzZXJzIGhhdmUgdGltZSB0byByZWFkIHRoZSBtZXNzYWdlCiAgICAgICAgICAgICAgICAvL2F3YWl0IHRoaXMudGltZW91dCgxMDApOwoKCiAgICAgICAgICAgICAgICBfdGhpcy50dXJuQ2FtZXJhT24oKTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50KTsKCiAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnQXR0ZW5kU2NhblFSUmVzdWx0JywKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgc2NhbmRhdGE6IGNvbnRlbnQKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB0dXJuQ2FtZXJhT246IGZ1bmN0aW9uIHR1cm5DYW1lcmFPbigpIHsKICAgICAgdGhpcy5jYW1lcmEgPSAnYXV0byc7CiAgICB9LAogICAgdHVybkNhbWVyYU9mZjogZnVuY3Rpb24gdHVybkNhbWVyYU9mZigpIHsKICAgICAgdGhpcy5jYW1lcmEgPSAnb2ZmJzsKICAgIH0sCiAgICB0aW1lb3V0OiBmdW5jdGlvbiB0aW1lb3V0KG1zKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJlc29sdmUsIG1zKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["AttendScanQRCode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA,SAAA,QAAA,EAAA,YAAA,EAAA,uBAAA,QAAA,SAAA;AAEA,SAAA,YAAA,QAAA,mBAAA;AAEA,SAAA,YAAA,EAAA,OAAA,QAAA,wBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,YAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA,OAFA;AAKA,MAAA,OAAA,EAAA,SALA;AAMA,MAAA,MAAA,EAAA,MANA;AAOA,MAAA,MAAA,EAAA,IAPA;AAQA,MAAA,KAAA,EAAA,YAAA,EARA;AASA,MAAA,KAAA,EAAA,OAAA,EATA;AAUA,MAAA,YAAA,EAAA,YAVA;AAWA,MAAA,uBAAA,EAAA;AAXA,KAAA;AAaA,GAhBA;AAkBA,EAAA,QAAA,EAAA;AACA,IAAA,iBADA,+BACA;AACA,aAAA,KAAA,OAAA,KAAA,SAAA,IAAA,KAAA,MAAA,KAAA,KAAA;AACA,KAHA;AAKA,IAAA,iBALA,+BAKA;AACA,aAAA,KAAA,OAAA,KAAA,IAAA;AACA,KAPA;AASA,IAAA,iBATA,+BASA;AACA,aAAA,KAAA,OAAA,KAAA,KAAA;AACA;AAXA,GAlBA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,OADA,EACA;AACA,MAAA,OAAA,CAAA,KAAA,CAAA,OAAA,CAAA,KAAA,EAAA,IAAA,CAAA,KAAA,oBAAA;AACA,KAHA;AAKA,IAAA,oBALA,kCAKA;AACA,WAAA,OAAA,GAAA,SAAA;AACA,KAPA;AASA,IAAA,QATA,oBASA,OATA,EASA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,MAAA,GAAA,OAAA;;AACA,gBAAA,KAAA,CAAA,aAAA,GAFA,CAIA;AAEA;AACA;AAEA;AACA;;;AAEA,gBAAA,KAAA,CAAA,YAAA;;AAEA,gBAAA,OAAA,CAAA,GAAA,CAAA,OAAA;;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,kBAAA,IAAA,EAAA,oBADA;AAEA,kBAAA,MAAA,EAAA;AAAA,oBAAA,QAAA,EAAA;AAAA;AAFA,iBAAA;;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,KA5BA;AA8BA,IAAA,YA9BA,0BA8BA;AACA,WAAA,MAAA,GAAA,MAAA;AACA,KAhCA;AAkCA,IAAA,aAlCA,2BAkCA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KApCA;AAsCA,IAAA,OAtCA,mBAsCA,EAtCA,EAsCA;AACA,aAAA,IAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,QAAA,MAAA,CAAA,UAAA,CAAA,OAAA,EAAA,EAAA;AACA,OAFA,CAAA;AAGA;AA1CA;AA/BA,CAAA","sourcesContent":["<template>\n\t<div class=\"\">\n\t\t<div class=\"auth-inner\">\n\t\t\t<v-card class=\"auth-card\">\n\t\t\t\t<v-card-title class=\"d-flex align-center justify-center py-7\">\n\t\t\t\t\t<qrcode-stream :camera=\"camera\" @decode=\"onDecode\" @init=\"onInit\">\n\t\t\t\t\t\t<div v-if=\"validationSuccess\" class=\"validation-success\">\n\t\t\t\t\t\t\tThe attendance check is complete.\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div v-if=\"validationFailure\" class=\"validation-failure\">\n\t\t\t\t\t\t\tThis is NOT a URL!\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div v-if=\"validationPending\" class=\"validation-pending\">\n\t\t\t\t\t\t\tLong validation in progress...\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</qrcode-stream>\n\t\t\t\t</v-card-title>\n\n\t\t\t\t<v-card-text class=\"d-flex align-center mt-5\">\n\t\t\t\t\t<v-avatar\n\t\t\t\t\t\tsize=\"54\"\n\t\t\t\t\t\trounded\n\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\tclass=\"v-avatar-light-bg primary--text mt-1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span class=\"font-weight-medium\">\n\t\t\t\t\t\t\t\t{{ month }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<p class=\"text-xl primary--text font-weight-bold mb-0\">\n\t\t\t\t\t\t\t\t{{ ndate }}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</v-avatar>\n\n\t\t\t\t\t<div class=\"ms-3\">\n\t\t\t\t\t\t<h4 class=\"text-base font-weight-semibold\">\n\t\t\t\t\t\t\t{{ this.$store.state.userInfo.userName }}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<p class=\"text-xs mb-0\">Please scan QRcode in the sales office</p>\n\t\t\t\t\t</div>\n\t\t\t\t</v-card-text>\n\n\t\t\t\t<v-card-text>\n\t\t\t\t\t<v-divider></v-divider>\n\t\t\t\t</v-card-text>\n\n\t\t\t\t<template v-if=\"validationSuccess\">\n\t\t\t\t\t<v-card-text class=\"d-flex align-center mt-5\">\n\t\t\t\t\t\t<v-avatar size=\"54\" rounded>\n\t\t\t\t\t\t\t<v-icon size=\"30\" color=\"success\"> {{ mdiCheckBold }} </v-icon>\n\t\t\t\t\t\t</v-avatar>\n\n\t\t\t\t\t\t<div class=\"ms-3\">\n\t\t\t\t\t\t\t<p class=\"text-xs mb-0\">{{ result }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</v-card-text>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"validationFailure\">\n\t\t\t\t\t<v-card-text class=\"d-flex align-center mt-5\">\n\t\t\t\t\t\t<v-avatar size=\"54\" rounded>\n\t\t\t\t\t\t\t<v-icon size=\"30\" color=\"error\">\n\t\t\t\t\t\t\t\t{{ mdiCheckDecagramOutline }}\n\t\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t</v-avatar>\n\n\t\t\t\t\t\t<div class=\"ms-3\">\n\t\t\t\t\t\t\t<p class=\"text-xs mb-0\">{{ result }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</v-card-text>\n\t\t\t\t</template>\n\t\t\t</v-card>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { mdiClose, mdiCheckBold, mdiCheckDecagramOutline } from '@mdi/js';\n\nimport { QrcodeStream } from 'vue-qrcode-reader';\n\nimport { getMonthName, getDate } from '../../utils/validation';\n\nexport default {\n\tcomponents: { QrcodeStream },\n\tdata() {\n\t\treturn {\n\t\t\t// icon\n\t\t\ticons: {\n\t\t\t\tmdiClose,\n\t\t\t},\n\t\t\tisValid: undefined,\n\t\t\tcamera: 'auto',\n\t\t\tresult: null,\n\t\t\tmonth: getMonthName(),\n\t\t\tndate: getDate(),\n\t\t\tmdiCheckBold,\n\t\t\tmdiCheckDecagramOutline,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tvalidationPending() {\n\t\t\treturn this.isValid === undefined && this.camera === 'off';\n\t\t},\n\n\t\tvalidationSuccess() {\n\t\t\treturn this.isValid === true;\n\t\t},\n\n\t\tvalidationFailure() {\n\t\t\treturn this.isValid === false;\n\t\t},\n\t},\n\tmethods: {\n\t\tonInit(promise) {\n\t\t\tpromise.catch(console.error).then(this.resetValidationState);\n\t\t},\n\n\t\tresetValidationState() {\n\t\t\tthis.isValid = undefined;\n\t\t},\n\n\t\tasync onDecode(content) {\n\t\t\tthis.result = content;\n\t\t\tthis.turnCameraOff();\n\n\t\t\t//this.isValid = content.startsWith('http');\n\n\t\t\t// pretend it's taking really long\n\t\t\t//await this.timeout(1000);\n\n\t\t\t// some more delay, so users have time to read the message\n\t\t\t//await this.timeout(100);\n\n\t\t\tthis.turnCameraOn();\n\n\t\t\tconsole.log(content);\n\t\t\tthis.$router.push({\n\t\t\t\tname: 'AttendScanQRResult',\n\t\t\t\tparams: { scandata: content },\n\t\t\t});\n\t\t},\n\n\t\tturnCameraOn() {\n\t\t\tthis.camera = 'auto';\n\t\t},\n\n\t\tturnCameraOff() {\n\t\t\tthis.camera = 'off';\n\t\t},\n\n\t\ttimeout(ms) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\twindow.setTimeout(resolve, ms);\n\t\t\t});\n\t\t},\n\t},\n};\n</script>\n\n<style lang=\"scss\">\n@import '@core/preset/preset/pages/auth.scss';\n#camera {\n\ttext-align: center;\n\tcolor: #2c3e50;\n}\n#video {\n\tbackground-color: #000000;\n}\n#canvas {\n\tdisplay: none;\n}\nli {\n\tdisplay: inline;\n\tpadding: 5px;\n}\n.validation-success,\n.validation-failure,\n.validation-pending {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\n\tbackground-color: rgba(255, 255, 255, 0.8);\n\ttext-align: center;\n\tfont-weight: bold;\n\tfont-size: 1.4rem;\n\tpadding: 10px;\n\n\tdisplay: flex;\n\tflex-flow: column nowrap;\n\tjustify-content: center;\n}\n.validation-success {\n\tcolor: green;\n}\n.validation-failure {\n\tcolor: red;\n}\n</style>\n"],"sourceRoot":"src/views/comm"}]}