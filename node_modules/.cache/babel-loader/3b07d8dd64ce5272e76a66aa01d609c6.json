{"remainingRequest":"D:\\extrust\\eboard\\node_modules\\thread-loader\\dist\\cjs.js!D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js!D:\\extrust\\eboard\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\extrust\\eboard\\src\\webViewBridge.js","dependencies":[{"path":"D:\\extrust\\eboard\\src\\webViewBridge.js","mtime":1693900186491},{"path":"D:\\extrust\\eboard\\babel.config.js","mtime":1639533184000},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1689230669007},{"path":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js","mtime":1689230675098},{"path":"D:\\extrust\\eboard\\node_modules\\eslint-loader\\index.js","mtime":1689230670675}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiKTsKCihmdW5jdGlvbiAoKSB7CiAgdmFyIHByb21pc2VDaGFpbiA9IFByb21pc2UucmVzb2x2ZSgpOwogIHZhciBjYWxsYmFja3MgPSB7fTsKCiAgdmFyIGluaXQgPSBmdW5jdGlvbiBpbml0KCkgewogICAgLy8g7Jyg64uI7YGs7ZWcIOyVhOydtOuUlOulvCDsg53shLHtlZzri6QuCiAgICAvLyBuYXRpdmXsl5DshJwgY2FsbGJhY2sg67Cb7J2E65WMIGlk7J2YIGNhbGxiYWNr7J2EIO2YuOy2nO2VnOuLpC4KICAgIHZhciBndWlkID0gZnVuY3Rpb24gZ3VpZCgpIHsKICAgICAgZnVuY3Rpb24gczQoKSB7CiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTsKICAgIH07CiAgICAvKioNCiAgICAgKiBqYXZhc2NyaXB0ID0+IHJlYWN0LW5hdGl2ZQ0KICAgICAqIGphdmFzY3JpcHTsl5DshJwgcmVhY3QtbmF0aXZl7JeQIOuplOyEuOyngOulvCDrs7Trgrjri6QuDQogICAgICovCgoKICAgIHdpbmRvdy53ZWJWaWV3QnJpZGdlID0gewogICAgICBzZW5kOiBmdW5jdGlvbiBzZW5kKHRhcmdldEZ1bmMsIGRhdGEsIHN1Y2Nlc3MsIGVycm9yKSB7CiAgICAgICAgdmFyIG1zZ09iaiA9IHsKICAgICAgICAgIHRhcmdldEZ1bmM6IHRhcmdldEZ1bmMsCiAgICAgICAgICBkYXRhOiBkYXRhIHx8IHt9CiAgICAgICAgfTsKCiAgICAgICAgaWYgKHN1Y2Nlc3MgfHwgZXJyb3IpIHsKICAgICAgICAgIG1zZ09iai5tc2dJZCA9IGd1aWQoKTsKICAgICAgICB9CgogICAgICAgIHZhciBtc2cgPSBKU09OLnN0cmluZ2lmeShtc2dPYmopOwogICAgICAgIHByb21pc2VDaGFpbiA9IHByb21pc2VDaGFpbi50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWFjdCBuYXRpdmXsl5Ag66mU7IS47KeA66W8IOuztOuDhCAnICsgbXNnT2JqLnRhcmdldEZ1bmMpOwoKICAgICAgICAgICAgaWYgKG1zZ09iai5tc2dJZCkgewogICAgICAgICAgICAgIGNhbGxiYWNrc1ttc2dPYmoubXNnSWRdID0gewogICAgICAgICAgICAgICAgb25zdWNjZXNzOiBzdWNjZXNzLAogICAgICAgICAgICAgICAgb25lcnJvcjogZXJyb3IKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3LnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfrqZTshLjsp4Ag7Iuk7YyoICcgKyBlLm1lc3NhZ2UpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9OwogICAgLyoqDQogICAgICogcmVhY3QtbmF0aXZlID0+IGphdmFzY3JpcHQNCiAgICAgKiByZWFjdCBuYXRpdmXsl5DshJwg7ZmU66m07JeQIOqysOqzvOulvCDrhJjqsqjspIDri6QuDQogICAgICogZm9yIGFuZHJvaWQNCiAgICAgKi8KCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIG1lc3NhZ2U7CgogICAgICB0cnkgewogICAgICAgIG1lc3NhZ2UgPSBKU09OLnBhcnNlKGUuZGF0YSk7CiAgICAgICAgYWxlcnQoJ2NhbGwgYmFjayBldmVudCBlLmRhdGEgOjonICsgZS5kYXRhKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign66mU7IS47KeA66W8IO2MjOyLse2VoOyImCDsl4bsnYwgJyArIGVycik7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGNhbGxiYWNr7J2EIO2KuOumrOqxsO2VnOuLpC4KCgogICAgICBpZiAoY2FsbGJhY2tzW21lc3NhZ2UubXNnSWRdKSB7CiAgICAgICAgaWYgKG1lc3NhZ2UuaXNTdWNjZXNzZnVsbCkgewogICAgICAgICAgY2FsbGJhY2tzW21lc3NhZ2UubXNnSWRdLm9uc3VjY2VzcyhtZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2FsbGJhY2tzW21lc3NhZ2UubXNnSWRdLm9uZXJyb3IobWVzc2FnZSk7CiAgICAgICAgfQoKICAgICAgICBkZWxldGUgY2FsbGJhY2tzW21lc3NhZ2UubXNnSWRdOwogICAgICB9CiAgICB9KTsKICAgIC8qKg0KICAgICAqIHJlYWN0LW5hdGl2ZSA9PiBqYXZhc2NyaXB0DQogICAgICogcmVhY3QgbmF0aXZl7JeQ7IScIO2ZlOuptOyXkCDqsrDqs7zrpbwg64SY6rKo7KSA64ukLg0KICAgICAqIGZvciBpb3MNCiAgICAgKi8KCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBtZXNzYWdlOwoKICAgICAgdHJ5IHsKICAgICAgICBtZXNzYWdlID0gSlNPTi5wYXJzZShlLmRhdGEpOwogICAgICAgIGFsZXJ0KCdjYWxsIGJhY2sgZXZlbnQgZS5kYXRhIDo6JyArIGUuZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+uplOyEuOyngOulvCDtjIzsi7HtlaDsiJgg7JeG7J2MICcgKyBlcnIpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBjYWxsYmFja+ydhCDtirjrpqzqsbDtlZzri6QuCgoKICAgICAgaWYgKGNhbGxiYWNrc1ttZXNzYWdlLm1zZ0lkXSkgewogICAgICAgIGlmIChtZXNzYWdlLmlzU3VjY2Vzc2Z1bGwpIHsKICAgICAgICAgIGNhbGxiYWNrc1ttZXNzYWdlLm1zZ0lkXS5vbnN1Y2Nlc3MobWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNhbGxiYWNrc1ttZXNzYWdlLm1zZ0lkXS5vbmVycm9yKG1lc3NhZ2UpOwogICAgICAgIH0KCiAgICAgICAgZGVsZXRlIGNhbGxiYWNrc1ttZXNzYWdlLm1zZ0lkXTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgaW5pdCgpOwp9KSgpOw=="},{"version":3,"sources":["D:/extrust/eboard/src/webViewBridge.js"],"names":["promiseChain","Promise","resolve","callbacks","init","guid","s4","Math","floor","random","toString","substring","window","webViewBridge","send","targetFunc","data","success","error","msgObj","msgId","msg","JSON","stringify","then","reject","console","log","onsuccess","onerror","ReactNativeWebView","postMessage","catch","e","message","document","addEventListener","parse","alert","err","isSuccessfull"],"mappings":"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","sourcesContent":["(function () {\r\n\tvar promiseChain = Promise.resolve();\r\n\tvar callbacks = {};\r\n\tvar init = function () {\r\n\t\t// 유니크한 아이디를 생성한다.\r\n\t\t// native에서 callback 받을때 id의 callback을 호출한다.\r\n\t\tconst guid = function () {\r\n\t\t\tfunction s4() {\r\n\t\t\t\treturn Math.floor((1 + Math.random()) * 0x10000)\r\n\t\t\t\t\t.toString(16)\r\n\t\t\t\t\t.substring(1);\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\ts4() +\r\n\t\t\t\ts4() +\r\n\t\t\t\t'-' +\r\n\t\t\t\ts4() +\r\n\t\t\t\t'-' +\r\n\t\t\t\ts4() +\r\n\t\t\t\t'-' +\r\n\t\t\t\ts4() +\r\n\t\t\t\t'-' +\r\n\t\t\t\ts4() +\r\n\t\t\t\ts4() +\r\n\t\t\t\ts4()\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * javascript => react-native\r\n\t\t * javascript에서 react-native에 메세지를 보낸다.\r\n\t\t */\r\n\t\twindow.webViewBridge = {\r\n\t\t\tsend: function (targetFunc, data, success, error) {\r\n\t\t\t\tvar msgObj = {\r\n\t\t\t\t\ttargetFunc: targetFunc,\r\n\t\t\t\t\tdata: data || {},\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (success || error) {\r\n\t\t\t\t\tmsgObj.msgId = guid();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar msg = JSON.stringify(msgObj);\r\n\r\n\t\t\t\tpromiseChain = promiseChain\r\n\t\t\t\t\t.then(function () {\r\n\t\t\t\t\t\treturn new Promise(function (resolve, reject) {\r\n\t\t\t\t\t\t\tconsole.log('react native에 메세지를 보냄 ' + msgObj.targetFunc);\r\n\r\n\t\t\t\t\t\t\tif (msgObj.msgId) {\r\n\t\t\t\t\t\t\t\tcallbacks[msgObj.msgId] = {\r\n\t\t\t\t\t\t\t\t\tonsuccess: success,\r\n\t\t\t\t\t\t\t\t\tonerror: error,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\twindow.ReactNativeWebView.postMessage(msg);\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function (e) {\r\n\t\t\t\t\t\tconsole.error('메세지 실패 ' + e.message);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * react-native => javascript\r\n\t\t * react native에서 화면에 결과를 넘겨준다.\r\n\t\t * for android\r\n\t\t */\r\n\t\tdocument.addEventListener('message', function (e) {\r\n\t\t\tvar message;\r\n\t\t\ttry {\r\n\t\t\t\tmessage = JSON.parse(e.data);\r\n\t\t\t\talert('call back event e.data ::' + e.data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('메세지를 파싱할수 없음 ' + err);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// callback을 트리거한다.\r\n\t\t\tif (callbacks[message.msgId]) {\r\n\t\t\t\tif (message.isSuccessfull) {\r\n\t\t\t\t\tcallbacks[message.msgId].onsuccess(message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallbacks[message.msgId].onerror(message);\r\n\t\t\t\t}\r\n\t\t\t\tdelete callbacks[message.msgId];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * react-native => javascript\r\n\t\t * react native에서 화면에 결과를 넘겨준다.\r\n\t\t * for ios\r\n\t\t */\r\n\t\twindow.addEventListener('message', function (e) {\r\n\t\t\tvar message;\r\n\t\t\ttry {\r\n\t\t\t\tmessage = JSON.parse(e.data);\r\n\t\t\t\talert('call back event e.data ::' + e.data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('메세지를 파싱할수 없음 ' + err);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// callback을 트리거한다.\r\n\t\t\tif (callbacks[message.msgId]) {\r\n\t\t\t\tif (message.isSuccessfull) {\r\n\t\t\t\t\tcallbacks[message.msgId].onsuccess(message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcallbacks[message.msgId].onerror(message);\r\n\t\t\t\t}\r\n\t\t\t\tdelete callbacks[message.msgId];\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tinit();\r\n})();\r\n"]}]}