{"remainingRequest":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js!D:\\extrust\\eboard\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\extrust\\eboard\\src\\utils\\callRPT.js","dependencies":[{"path":"D:\\extrust\\eboard\\src\\utils\\callRPT.js","mtime":1707898716566},{"path":"D:\\extrust\\eboard\\babel.config.js","mtime":1639533184000},{"path":"D:\\extrust\\eboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689230669062},{"path":"D:\\extrust\\eboard\\node_modules\\babel-loader\\lib\\index.js","mtime":1689230675098},{"path":"D:\\extrust\\eboard\\node_modules\\eslint-loader\\index.js","mtime":1689230670675}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmpzIjsKaW1wb3J0IFRvYXN0ZWQgZnJvbSAndnVlLXRvYXN0ZWQnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBidXMgZnJvbSAnLi9idXMnOwp2YXIgZmlsZU5hbWUgPSAnJzsKCmZ1bmN0aW9uIGNhbGxSUFQocmVxdWVzdE9wdGlvbnMpIHsKICBjb25zb2xlLmxvZyhyZXF1ZXN0T3B0aW9ucyk7CiAgdmFyIG15SGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7CiAgbXlIZWFkZXJzLmFwcGVuZCgiQ29va2llIiwgImZpbGVEb3dubG9hZD10cnVlIik7CiAgcmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IG15SGVhZGVyczsKICBmaWxlTmFtZSA9IHJlcXVlc3RPcHRpb25zLmZpbGVOYW1lOwogIHZhciBycHR1cmwgPSAnaHR0cHM6Ly9ldHJ1c3RkZXYubXkuY293YXkuY29tJzsgLy9zdGFydCBzcGlubmVyCgogIGJ1cy4kZW1pdCgnc3RhcnQ6c3Bpbm5lcicpOwogIGZldGNoKCIiLmNvbmNhdChycHR1cmwsICIvcmVwb3J0LyIpLmNvbmNhdChyZXF1ZXN0T3B0aW9ucy5ycHRGdW5jVmlld1R5cGUpLCByZXF1ZXN0T3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgIHJldHVybiByZXNwb25zZS5ibG9iKCk7CiAgfSkudGhlbihmdW5jdGlvbiAoYmxvYikgewogICAgZG93bmxvYWRGaWxlKGJsb2IpOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgVnVlLnRvYXN0ZWQuZXJyb3IoJ1RoZXJlIHdhcyBhbiByZXBvcnQgc2VydmVyIGlzc3VlIFsnICsgZXJyb3IgKyAnXScsIHsKICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgcG9zaXRpb246ICdib3R0b20tcmlnaHQnLAogICAgICBhY3Rpb246IHsKICAgICAgICB0ZXh0OiAnQ2xvc2UnLAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSwgdG9hc3RPYmplY3QpIHsKICAgICAgICAgIHRvYXN0T2JqZWN0LmdvQXdheSgwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pLmdvQXdheSgzNTAwKTsKICAgIGJ1cy4kZW1pdCgnZW5kOnNwaW5uZXInKTsKICB9KTsKfQoKZnVuY3Rpb24gZG93bmxvYWRGaWxlKGJsb2IpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICB2YXIgbmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmlsZU5hbWU7CiAgdmFyIGhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogIHZhciBhID0gT2JqZWN0LmFzc2lnbihkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIiksIHsKICAgIGhyZWY6IGhyZWYsCiAgICBzdHlsZTogImRpc3BsYXk6bm9uZSIsCiAgICBkb3dubG9hZDogbmFtZQogIH0pOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgYS5jbGljaygpOwogIFVSTC5yZXZva2VPYmplY3RVUkwoaHJlZik7CiAgYS5yZW1vdmUoKTsKICBWdWUudG9hc3RlZC5zdWNjZXNzKCdJdCBoYXMgYmVlbiBkb3dubG9hZCBmaWxlJywgewogICAgaWNvbjogJ2NoZWNrJywKICAgIHBvc2l0aW9uOiAnYm90dG9tLXJpZ2h0JywKICAgIGFjdGlvbjogewogICAgICB0ZXh0OiAnQ2xvc2UnLAogICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUsIHRvYXN0T2JqZWN0KSB7CiAgICAgICAgX3RoaXMuYnRJc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgdG9hc3RPYmplY3QuZ29Bd2F5KDApOwogICAgICB9CiAgICB9CiAgfSkuZ29Bd2F5KDI1MDApOwogIGJ1cy4kZW1pdCgnZW5kOnNwaW5uZXInKTsKfQoKZXhwb3J0IGRlZmF1bHQgewogIGNhbGxSUFQ6IGNhbGxSUFQKfTs="},{"version":3,"sources":["D:/extrust/eboard/src/utils/callRPT.js"],"names":["Toasted","Vue","bus","fileName","callRPT","requestOptions","console","log","myHeaders","Headers","append","headers","rpturl","$emit","fetch","rptFuncViewType","then","response","blob","downloadFile","catch","error","toasted","icon","position","action","text","onClick","e","toastObject","goAway","name","href","URL","createObjectURL","a","Object","assign","document","createElement","style","download","body","appendChild","click","revokeObjectURL","remove","success","btIsActive"],"mappings":";;;;;AAAA,OAAOA,OAAP,MAAoB,aAApB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,OAAhB;AAEA,IAAIC,QAAQ,GAAE,EAAd;;AAEA,SAASC,OAAT,CAAiBC,cAAjB,EAAgC;AAE9BC,EAAAA,OAAO,CAACC,GAAR,CAAYF,cAAZ;AAEA,MAAIG,SAAS,GAAG,IAAIC,OAAJ,EAAhB;AACAD,EAAAA,SAAS,CAACE,MAAV,CAAiB,QAAjB,EAA2B,mBAA3B;AACAL,EAAAA,cAAc,CAACM,OAAf,GAAyBH,SAAzB;AACAL,EAAAA,QAAQ,GAAEE,cAAc,CAACF,QAAzB;AAEA,MAAIS,MAAM,GAAE,gCAAZ,CAT8B,CAW7B;;AACDV,EAAAA,GAAG,CAACW,KAAJ,CAAU,eAAV;AAEAC,EAAAA,KAAK,WAAIF,MAAJ,qBAAqBP,cAAc,CAACU,eAApC,GAAuDV,cAAvD,CAAL,CACCW,IADD,CACM,UAAAC,QAAQ,EAAI;AAAE,WAAOA,QAAQ,CAACC,IAAT,EAAP;AAAuB,GAD3C,EAECF,IAFD,CAEM,UAACE,IAAD,EAAU;AAACC,IAAAA,YAAY,CAACD,IAAD,CAAZ;AAAoB,GAFrC,EAGCE,KAHD,CAGO,UAAAC,KAAK,EAAI;AACZpB,IAAAA,GAAG,CAACqB,OAAJ,CACKD,KADL,CACW,uCAAuCA,KAAvC,GAA+C,GAD1D,EAC+D;AACzDE,MAAAA,IAAI,EAAE,OADmD;AAEzDC,MAAAA,QAAQ,EAAE,cAF+C;AAGzDC,MAAAA,MAAM,EAAE;AACNC,QAAAA,IAAI,EAAE,OADA;AAENC,QAAAA,OAAO,EAAE,iBAACC,CAAD,EAAIC,WAAJ,EAAoB;AAC3BA,UAAAA,WAAW,CAACC,MAAZ,CAAmB,CAAnB;AACD;AAJK;AAHiD,KAD/D,EAWKA,MAXL,CAWY,IAXZ;AAYI5B,IAAAA,GAAG,CAACW,KAAJ,CAAU,aAAV;AACP,GAjBD;AAkBD;;AAED,SAASM,YAAT,CAAsBD,IAAtB,EAA6C;AAAA;;AAAA,MAAjBa,IAAiB,uEAAV5B,QAAU;AACzC,MAAM6B,IAAI,GAAGC,GAAG,CAACC,eAAJ,CAAoBhB,IAApB,CAAb;AACA,MAAMiB,CAAC,GAAGC,MAAM,CAACC,MAAP,CAAcC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd,EAA2C;AACnDP,IAAAA,IAAI,EAAJA,IADmD;AAEnDQ,IAAAA,KAAK,EAAE,cAF4C;AAGnDC,IAAAA,QAAQ,EAAEV;AAHyC,GAA3C,CAAV;AAKAO,EAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BR,CAA1B;AACAA,EAAAA,CAAC,CAACS,KAAF;AACAX,EAAAA,GAAG,CAACY,eAAJ,CAAoBb,IAApB;AACAG,EAAAA,CAAC,CAACW,MAAF;AACA7C,EAAAA,GAAG,CAACqB,OAAJ,CACCyB,OADD,CACS,2BADT,EACsC;AACpCxB,IAAAA,IAAI,EAAE,OAD8B;AAEpCC,IAAAA,QAAQ,EAAE,cAF0B;AAGpCC,IAAAA,MAAM,EAAE;AACNC,MAAAA,IAAI,EAAE,OADA;AAENC,MAAAA,OAAO,EAAE,iBAACC,CAAD,EAAIC,WAAJ,EAAoB;AAC3B,QAAA,KAAI,CAACmB,UAAL,GAAkB,IAAlB;AACAnB,QAAAA,WAAW,CAACC,MAAZ,CAAmB,CAAnB;AACD;AALK;AAH4B,GADtC,EAYCA,MAZD,CAYQ,IAZR;AAcA5B,EAAAA,GAAG,CAACW,KAAJ,CAAU,aAAV;AACH;;AAGD,eAAe;AACbT,EAAAA,OAAO,EAAPA;AADa,CAAf","sourcesContent":["import Toasted from 'vue-toasted';\r\nimport Vue from 'vue';\r\nimport bus from './bus';\r\n\r\nlet fileName ='';\r\n\r\nfunction callRPT(requestOptions){\r\n\r\n  console.log(requestOptions)\r\n\r\n  var myHeaders = new Headers();\r\n  myHeaders.append(\"Cookie\", \"fileDownload=true\");\r\n  requestOptions.headers = myHeaders;\r\n  fileName= requestOptions.fileName;\r\n\r\n  let rpturl ='https://etrustdev.my.coway.com';\r\n\r\n  \t//start spinner\r\n  bus.$emit('start:spinner');\r\n  \r\n  fetch(`${rpturl}/report/${requestOptions.rptFuncViewType}`, requestOptions)\r\n  .then(response => { return response.blob()})\r\n  .then((blob) => {downloadFile(blob);})\r\n  .catch(error => {\r\n      Vue.toasted\r\n          .error('There was an report server issue [' + error + ']', {\r\n            icon: 'error',\r\n            position: 'bottom-right',\r\n            action: {\r\n              text: 'Close',\r\n              onClick: (e, toastObject) => {\r\n                toastObject.goAway(0);\r\n              },\r\n            },\r\n          })\r\n          .goAway(3500);\r\n          bus.$emit('end:spinner');\r\n  })\r\n}\r\n\r\nfunction downloadFile(blob, name = fileName) {\r\n    const href = URL.createObjectURL(blob);\r\n    const a = Object.assign(document.createElement(\"a\"), {\r\n      href,\r\n      style: \"display:none\",\r\n      download: name,\r\n    });\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    URL.revokeObjectURL(href);\r\n    a.remove();\r\n    Vue.toasted\r\n    .success('It has been download file', {\r\n      icon: 'check',\r\n      position: 'bottom-right',\r\n      action: {\r\n        text: 'Close',\r\n        onClick: (e, toastObject) => {\r\n          this.btIsActive = true;\r\n          toastObject.goAway(0);\r\n        },\r\n      },\r\n    })\r\n    .goAway(2500);\r\n\r\n    bus.$emit('end:spinner');\r\n}\r\n\r\n\r\nexport default {\r\n  callRPT\r\n}\r\n\r\n\r\n\r\n"]}]}