{"version":3,"sources":["webpack:///./src/views/commission/HPYearlyIncomeStatement.vue?1db1","webpack:///./src/utils/callRPT.js","webpack:///src/views/commission/HPYearlyIncomeStatement.vue","webpack:///./src/views/commission/HPYearlyIncomeStatement.vue?170f","webpack:///./src/views/commission/HPYearlyIncomeStatement.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","model","value","callback","$$v","memCode","expression","targetOptions","targetFilter","on","getCP58Form","_s","icons","mdiSearchWeb","staticRenderFns","fileName","callRPT","requestOptions","console","log","myHeaders","Headers","append","headers","rpturl","bus","$emit","fetch","rptFuncViewType","then","response","blob","downloadFile","catch","error","Vue","toasted","icon","position","action","text","onClick","e","toastObject","goAway","name","href","URL","createObjectURL","a","Object","assign","document","createElement","style","download","body","appendChild","click","revokeObjectURL","remove","success","btIsActive","components","computed","watch","methods","formdata","FormData","method","redirect","getYearList","rtnYen","push","c","created","userInfo","userName","beforeCreate","beforeDestroy","mounted","beforeMount","beforeUpdate","beforeUnmount","data","notificationDataList","component","VBtn","VCard","VCardText","VCardTitle","VIcon","VSelect","VTextField"],"mappings":"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","file":"js/chunk-2d0c023c.08b724e0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-card-title',[_vm._v(\" HP Income Statement \")]),_c('v-card-text',{staticClass:\"d-flex align-center flex-wrap pb-0\"},[_c('v-text-field',{staticClass:\"user-search mb-4 me-3\",attrs:{\"placeholder\":\"Member Code\"},model:{value:(_vm.memCode),callback:function ($$v) {_vm.memCode=$$v},expression:\"memCode\"}}),_c('v-select',{staticClass:\"user-search mb-4 me-3\",attrs:{\"clearable\":\"\",\"closable-chips\":\"true\",\"items\":_vm.targetOptions,\"label\":\"Select Target\"},model:{value:(_vm.targetFilter),callback:function ($$v) {_vm.targetFilter=$$v},expression:\"targetFilter\"}}),_c('div',{staticClass:\"d-flex align-center flex-wrap\"},[_c('v-btn',{staticClass:\"mb-4 me-3\",attrs:{\"color\":\"primary\"},on:{\"click\":_vm.getCP58Form}},[_c('v-icon',[_vm._v(_vm._s(_vm.icons.mdiSearchWeb)+\" \")]),_c('span',[_vm._v(\"CP58 Form\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from \"vue\";\nimport bus from \"./bus\";\n\nlet fileName = \"\";\n\nfunction callRPT(requestOptions) {\n  console.log(requestOptions);\n\n  var myHeaders = new Headers();\n  myHeaders.append(\"Cookie\", \"fileDownload=true\");\n  requestOptions.headers = myHeaders;\n  fileName = requestOptions.fileName;\n\n  let rpturl = \"https://etrustdev.my.coway.com\";\n\n  //start spinner\n  bus.$emit(\"start:spinner\");\n\n  fetch(`${rpturl}/report/${requestOptions.rptFuncViewType}`, requestOptions)\n    .then((response) => {\n      return response.blob();\n    })\n    .then((blob) => {\n      downloadFile(blob);\n    })\n    .catch((error) => {\n      Vue.toasted\n        .error(\"There was an report server issue [\" + error + \"]\", {\n          icon: \"error\",\n          position: \"bottom-right\",\n          action: {\n            text: \"Close\",\n            onClick: (e, toastObject) => {\n              toastObject.goAway(0);\n            },\n          },\n        })\n        .goAway(3500);\n      bus.$emit(\"end:spinner\");\n    });\n}\n\nfunction downloadFile(blob, name = fileName) {\n  const href = URL.createObjectURL(blob);\n  const a = Object.assign(document.createElement(\"a\"), {\n    href,\n    style: \"display:none\",\n    download: name,\n  });\n  document.body.appendChild(a);\n  a.click();\n  URL.revokeObjectURL(href);\n  a.remove();\n  Vue.toasted\n    .success(\"It has been download file\", {\n      icon: \"check\",\n      position: \"bottom-right\",\n      action: {\n        text: \"Close\",\n        onClick: (e, toastObject) => {\n          this.btIsActive = true;\n          toastObject.goAway(0);\n        },\n      },\n    })\n    .goAway(2500);\n\n  bus.$emit(\"end:spinner\");\n}\n\nexport default {\n  callRPT,\n};\n","<template>\n  <v-card>\n    <v-card-title> HP Income Statement </v-card-title>\n    <!-- actions -->\n    <v-card-text class=\"d-flex align-center flex-wrap pb-0\">\n      <!-- search -->\n      <v-text-field\n        v-model=\"memCode\"\n        placeholder=\"Member Code\"\n        class=\"user-search mb-4 me-3\"\n      >\n      </v-text-field>\n\n      <v-select\n        v-model=\"targetFilter\"\n        clearable\n        closable-chips=\"true\"\n        :items=\"targetOptions\"\n        label=\"Select Target\"\n        class=\"user-search mb-4 me-3\"\n      ></v-select>\n\n      <div class=\"d-flex align-center flex-wrap\">\n        <v-btn color=\"primary\" class=\"mb-4 me-3\" @click=\"getCP58Form\">\n          <v-icon>{{ icons.mdiSearchWeb }} </v-icon>\n          <span>CP58 Form</span>\n        </v-btn>\n      </div>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { mdiSearchWeb } from \"@mdi/js\";\nimport rpt from \"../../utils/callRPT\";\n\nexport default {\n  components: {},\n  computed: {},\n  watch: {},\n\n  methods: {\n    getCP58Form() {\n      var formdata = new FormData();\n      formdata.append(\"reportFileName\", \"/commission/CP58.rpt\");\n      formdata.append(\"reportDownFileName\", \"CP58_08022024\");\n      formdata.append(\"viewType\", \"PDF\");\n      formdata.append(\"V_MEMBERCODE\", this.memCode);\n      formdata.append(\"V_YEAR\", this.targetFilter);\n      //formdata.append(\"V_MEMBERCODE\", '500571');\n      //formdata.append(\"V_YEAR\",this.targetFilter);\n\n      var requestOptions = {\n        method: \"POST\",\n        body: formdata,\n        redirect: \"follow\",\n        rptFuncViewType: \"view-proc-submit.do\",\n        fileName: \"CP58Form.pdf\",\n      };\n\n      rpt.callRPT(requestOptions);\n    },\n    getYearList() {\n      let rtnYen = [];\n      const cYear = new Date().getFullYear();\n      for (let c = cYear - 4; c <= cYear; c++) {\n        rtnYen.push(c);\n      }\n      return rtnYen;\n    },\n  },\n\n  created() {\n    const userInfo = this.$store.state.userInfo;\n    this.memCode = userInfo.userName;\n  },\n  beforeCreate() {\n    console.log(\"......beforeCreate ......\");\n  },\n  beforeDestroy() {\n    console.log(\"......beforeDestroy ......\");\n  },\n  mounted() {\n    console.log(\"......mounted ......\");\n  },\n  beforeMount() {\n    console.log(\"......beforeMount ......\");\n  },\n  beforeUpdate() {\n    console.log(this.targetFilter);\n  },\n  beforeUnmount() {\n    console.log(\"......beforeUnmount ......\");\n  },\n\n  data() {\n    const memCode = \"\";\n    const targetFilter = new Date().getFullYear();\n    const targetOptions = this.getYearList();\n\n    return {\n      memCode,\n      notificationDataList: \"\",\n      targetOptions,\n      targetFilter,\n      icons: { mdiSearchWeb },\n    };\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HPYearlyIncomeStatement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HPYearlyIncomeStatement.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HPYearlyIncomeStatement.vue?vue&type=template&id=3d6d8ed9&\"\nimport script from \"./HPYearlyIncomeStatement.vue?vue&type=script&lang=js&\"\nexport * from \"./HPYearlyIncomeStatement.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VIcon,VSelect,VTextField})\n"],"sourceRoot":""}